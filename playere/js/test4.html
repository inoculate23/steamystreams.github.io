<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Primary Meta Tags -->
    <title>videos</title>
    <meta name="title" content="vids">
    <meta name="description" content="">

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.2/ace.js"></script>

    <style>
        #header1 {
            margin-left: 25px;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
        
        .hh {
            padding-right: 6px;
            width: 270px;
        }
    </style>
</head>
<script>
    





const data = null;

const xhr = new XMLHttpRequest();
xhr.withCredentials = true;

xhr.addEventListener("readystatechange", function () {
  if (this.readyState === this.DONE) {
    console.log(this.responseText);

    const thumb = document.createElement('img');
    thumb.setAttribute("id", data.results[i].username);
    thumb.setAttribute("class", "cb_button");
    thumb.setAttribute('onclick', 'myfunction_' + [i] + '()');
    const link = document.createElement('a');
    link.setAttribute('href', 'https://inoculate.media/hls/player_light.html?src=https://edge18-lax.live.mmcdn.com/live-hls/amlst:' + data.results[i].username + '/playlist.m3u8', );

    thumb.innerText = data.results[i].username;

    const rec_button = document.createElement('button');
    rec_button.setAttribute("class", "rec_button");

    rec_button.setAttribute('onclick', 'function' + Recorder + '()', );

    var header1 = document.getElementById('header1');
    header1.appendChild(link);
    
    link.append(thumb);


        function Recorder() {
            const FFmpeg = require('node-ffmpeg-pro');
            new FFmpeg()
            .Input('https://edge18-lax.live.mmcdn.com/live-hls/amlst:' +  + '/playlist.m3u8')
               .Output('recordings/test.mp4')   .Run('./dist/ffmpeg', FFmpeg.OverWriteOutput());
               header1.append(rec_button);

        }

    }


}






  
);

xhr.open("GET", "https://chaturbate.com/api/public/affiliates/onlinerooms/?limit=200&hd=true&gender=f&embed_video_only=1&tag=hairy&tag=bignipples&tag=bigpussylips&tag=smoke&wm=aqAcE&client_ip=request_ip");
xhr.setRequestHeader("cookie", "sbr=sec%3Asbrb6077ce3-c016-4063-8d0d-3dafff5b0b22%3A1pW3Am%3As4fmmZ21OubTOTUQQfafChHgXiw; csrftoken=o0emQbNbgFE8hUOOyFnguUPLMbIDYZknXnjyIqd6gpzaaSebsB5lDTMn0Qb6vebv; us_dU9X=1; fromaffiliate=1; us_x1Rd=1");
xhr.setRequestHeader("Content-Type", "application/json");

xhr.send(data);
</script>

<header id="header1"></header>
<hr class="my-5" />
<div id="content"></div>

</div>

<p>

<script src="../js/hls.js"></script>
</body>

</html>