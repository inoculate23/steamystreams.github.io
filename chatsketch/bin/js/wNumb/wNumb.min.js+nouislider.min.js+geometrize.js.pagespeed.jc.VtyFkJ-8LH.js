var mod_pagespeed_27wPOyA8uU="(function(){function r(b){return b.split(\"\").reverse().join(\"\")}function s(b,f,c){if((b[f]||b[c])&&b[f]===b[c])throw Error(f);}function v(b,f,c,d,e,p,q,k,l,h,n,a){q=a;var m,g=n=\"\";p&&(a=p(a));if(\"number\"!==typeof a||!isFinite(a))return!1;b&&0===parseFloat(a.toFixed(b))&&(a=0);0>a&&(m=!0,a=Math.abs(a));b&&(p=Math.pow(10,b),a=(Math.round(a*p)/p).toFixed(b));a=a.toString();-1!==a.indexOf(\".\")&&(b=a.split(\".\"),a=b[0],c&&(n=c+b[1]));f&&(a=r(a).match(/.{1,3}/g),a=r(a.join(r(f))));m&&k&&(g+=k);d&&(g+=d);m&&l&&(g+=l);g=g+a+n;e&&(g+=e);h&&(g=h(g,q));return g}function w(b,f,c,d,e,h,q,k,l,r,n,a){var m;b=\"\";n&&(a=n(a));if(!a||\"string\"!==typeof a)return!1;k&&a.substring(0,k.length)===k&&(a=a.replace(k,\"\"),m=!0);d&&a.substring(0,d.length)===d&&(a=a.replace(d,\"\"));l&&a.substring(0,l.length)===l&&(a=a.replace(l,\"\"),m=!0);e&&a.slice(-1*e.length)===e&&(a=a.slice(0,-1*e.length));f&&(a=a.split(f).join(\"\"));c&&(a=a.replace(c,\".\"));m&&(b+=\"-\");b=Number((b+a).replace(/[^0-9\\.\\-.]/g,\"\"));q&&(b=q(b));return\"number\"===typeof b&&isFinite(b)?b:!1}function x(b){var f,c,d,e={};for(f=0;f<h.length;f+=1)c=h[f],d=b[c],void 0===d?e[c]=\"negative\"!==c||e.negativeBefore?\"mark\"===c&&\".\"!==e.thousand?\".\":!1:\"-\":\"decimals\"===c?0<d&&8>d&&(e[c]=d):\"encoder\"===c||\"decoder\"===c||\"edit\"===c||\"undo\"===c?\"function\"===typeof d&&(e[c]=d):\"string\"===typeof d&&(e[c]=d);s(e,\"mark\",\"thousand\");s(e,\"prefix\",\"negative\");s(e,\"prefix\",\"negativeBefore\");return e}function u(b,f,c){var d,e=[];for(d=0;d<h.length;d+=1)e.push(b[h[d]]);e.push(c);return f.apply(\"\",e)}function t(b){if(!(this instanceof t))return new t(b);\"object\"===typeof b&&(b=x(b),this.to=function(f){return u(b,v,f)},this.from=function(f){return u(b,w,f)})}var h=\"decimals thousand mark prefix postfix encoder decoder negativeBefore negative edit undo\".split(\" \");window.wNumb=t})();";var mod_pagespeed_0fibCyQgwW="!function(a){if(\"function\"==typeof define&&define.amd)define([],a);else if(\"object\"==typeof exports){var b=require(\"fs\");module.exports=a(),module.exports.css=function(){return b.readFileSync(__dirname+\"/nouislider.min.css\",\"utf8\")}}else window.noUiSlider=a()}(function(){\"use strict\";function a(a){return a.filter(function(a){return this[a]?!1:this[a]=!0},{})}function b(a,b){return Math.round(a/b)*b}function c(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.defaultView||c.parentWindow,e=c.documentElement,f=d.pageXOffset;return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(f=0),{top:b.top+d.pageYOffset-e.clientTop,left:b.left+f-e.clientLeft}}function d(a){return\"number\"==typeof a&&!isNaN(a)&&isFinite(a)}function e(a){var b=Math.pow(10,7);return Number((Math.round(a*b)/b).toFixed(7))}function f(a,b,c){j(a,b),setTimeout(function(){k(a,b)},c)}function g(a){return Math.max(Math.min(a,100),0)}function h(a){return Array.isArray(a)?a:[a]}function i(a){var b=a.split(\".\");return b.length>1?b[1].length:0}function j(a,b){a.classList?a.classList.add(b):a.className+=\" \"+b}function k(a,b){a.classList?a.classList.remove(b):a.className=a.className.replace(new RegExp(\"(^|\\\\b)\"+b.split(\" \").join(\"|\")+\"(\\\\b|$)\",\"gi\"),\" \")}function l(a,b){a.classList?a.classList.contains(b):new RegExp(\"(^| )\"+b+\"( |$)\",\"gi\").test(a.className)}function m(a,b){return 100/(b-a)}function n(a,b){return 100*b/(a[1]-a[0])}function o(a,b){return n(a,a[0]<0?b+Math.abs(a[0]):b-a[0])}function p(a,b){return b*(a[1]-a[0])/100+a[0]}function q(a,b){for(var c=1;a>=b[c];)c+=1;return c}function r(a,b,c){if(c>=a.slice(-1)[0])return 100;var d,e,f,g,h=q(c,a);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],f+o([d,e],c)/m(f,g)}function s(a,b,c){if(c>=100)return a.slice(-1)[0];var d,e,f,g,h=q(c,b);return d=a[h-1],e=a[h],f=b[h-1],g=b[h],p([d,e],(c-f)*m(f,g))}function t(a,c,d,e){if(100===e)return e;var f,g,h=q(e,a);return d?(f=a[h-1],g=a[h],e-f>(g-f)/2?g:f):c[h-1]?a[h-1]+b(e-a[h-1],c[h-1]):e}function u(a,b,c){var e;if(\"number\"==typeof b&&(b=[b]),\"[object Array]\"!==Object.prototype.toString.call(b))throw new Error(\"noUiSlider: 'range' contains invalid value.\");if(e=\"min\"===a?0:\"max\"===a?100:parseFloat(a),!d(e)||!d(b[0]))throw new Error(\"noUiSlider: 'range' value isn't numeric.\");c.xPct.push(e),c.xVal.push(b[0]),e?c.xSteps.push(isNaN(b[1])?!1:b[1]):isNaN(b[1])||(c.xSteps[0]=b[1])}function v(a,b,c){return b?void(c.xSteps[a]=n([c.xVal[a],c.xVal[a+1]],b)/m(c.xPct[a],c.xPct[a+1])):!0}function w(a,b,c,d){this.xPct=[],this.xVal=[],this.xSteps=[d||!1],this.xNumSteps=[!1],this.snap=b,this.direction=c;var e,f=[];for(e in a)a.hasOwnProperty(e)&&f.push([a[e],e]);for(f.sort(function(a,b){return a[0]-b[0]}),e=0;e<f.length;e++)u(f[e][1],f[e][0],this);for(this.xNumSteps=this.xSteps.slice(0),e=0;e<this.xNumSteps.length;e++)v(e,this.xNumSteps[e],this)}function x(a,b){if(!d(b))throw new Error(\"noUiSlider: 'step' is not numeric.\");a.singleStep=b}function y(a,b){if(\"object\"!=typeof b||Array.isArray(b))throw new Error(\"noUiSlider: 'range' is not an object.\");if(void 0===b.min||void 0===b.max)throw new Error(\"noUiSlider: Missing 'min' or 'max' in 'range'.\");a.spectrum=new w(b,a.snap,a.dir,a.singleStep)}function z(a,b){if(b=h(b),!Array.isArray(b)||!b.length||b.length>2)throw new Error(\"noUiSlider: 'start' option is incorrect.\");a.handles=b.length,a.start=b}function A(a,b){if(a.snap=b,\"boolean\"!=typeof b)throw new Error(\"noUiSlider: 'snap' option must be a boolean.\")}function B(a,b){if(a.animate=b,\"boolean\"!=typeof b)throw new Error(\"noUiSlider: 'animate' option must be a boolean.\")}function C(a,b){if(\"lower\"===b&&1===a.handles)a.connect=1;else if(\"upper\"===b&&1===a.handles)a.connect=2;else if(b===!0&&2===a.handles)a.connect=3;else{if(b!==!1)throw new Error(\"noUiSlider: 'connect' option doesn't match handle count.\");a.connect=0}}function D(a,b){switch(b){case\"horizontal\":a.ort=0;break;case\"vertical\":a.ort=1;break;default:throw new Error(\"noUiSlider: 'orientation' option is invalid.\")}}function E(a,b){if(!d(b))throw new Error(\"noUiSlider: 'margin' option must be numeric.\");if(a.margin=a.spectrum.getMargin(b),!a.margin)throw new Error(\"noUiSlider: 'margin' option is only supported on linear sliders.\")}function F(a,b){if(!d(b))throw new Error(\"noUiSlider: 'limit' option must be numeric.\");if(a.limit=a.spectrum.getMargin(b),!a.limit)throw new Error(\"noUiSlider: 'limit' option is only supported on linear sliders.\")}function G(a,b){switch(b){case\"ltr\":a.dir=0;break;case\"rtl\":a.dir=1,a.connect=[0,2,1,3][a.connect];break;default:throw new Error(\"noUiSlider: 'direction' option was not recognized.\")}}function H(a,b){if(\"string\"!=typeof b)throw new Error(\"noUiSlider: 'behaviour' must be a string containing options.\");var c=b.indexOf(\"tap\")>=0,d=b.indexOf(\"drag\")>=0,e=b.indexOf(\"fixed\")>=0,f=b.indexOf(\"snap\")>=0;a.events={tap:c||f,drag:d,fixed:e,snap:f}}function I(a,b){if(a.format=b,\"function\"==typeof b.to&&\"function\"==typeof b.from)return!0;throw new Error(\"noUiSlider: 'format' requires 'to' and 'from' methods.\")}function J(a){var b,c={margin:0,limit:0,animate:!0,format:U};b={step:{r:!1,t:x},start:{r:!0,t:z},connect:{r:!0,t:C},direction:{r:!0,t:G},snap:{r:!1,t:A},animate:{r:!1,t:B},range:{r:!0,t:y},orientation:{r:!1,t:D},margin:{r:!1,t:E},limit:{r:!1,t:F},behaviour:{r:!0,t:H},format:{r:!1,t:I}};var d={connect:!1,direction:\"ltr\",behaviour:\"tap\",orientation:\"horizontal\"};return Object.keys(d).forEach(function(b){void 0===a[b]&&(a[b]=d[b])}),Object.keys(b).forEach(function(d){var e=b[d];if(void 0===a[d]){if(e.r)throw new Error(\"noUiSlider: '\"+d+\"' is required.\");return!0}e.t(c,a[d])}),c.pips=a.pips,c.style=c.ort?\"top\":\"left\",c}function K(a,b,c){var d=a+b[0],e=a+b[1];return c?(0>d&&(e+=Math.abs(d)),e>100&&(d-=e-100),[g(d),g(e)]):[d,e]}function L(a){a.preventDefault();var b,c,d=0===a.type.indexOf(\"touch\"),e=0===a.type.indexOf(\"mouse\"),f=0===a.type.indexOf(\"pointer\"),g=a;return 0===a.type.indexOf(\"MSPointer\")&&(f=!0),d&&(b=a.changedTouches[0].pageX,c=a.changedTouches[0].pageY),(e||f)&&(b=a.clientX+window.pageXOffset,c=a.clientY+window.pageYOffset),g.points=[b,c],g.cursor=e||f,g}function M(a,b){var c=document.createElement(\"div\"),d=document.createElement(\"div\"),e=[\"-lower\",\"-upper\"];return a&&e.reverse(),j(d,T[3]),j(d,T[3]+e[b]),j(c,T[2]),c.appendChild(d),c}function N(a,b,c){switch(a){case 1:j(b,T[7]),j(c[0],T[6]);break;case 3:j(c[1],T[6]);case 2:j(c[0],T[7]);case 0:j(b,T[6])}}function O(a,b,c){var d,e=[];for(d=0;a>d;d+=1)e.push(c.appendChild(M(b,d)));return e}function P(a,b,c){j(c,T[0]),j(c,T[8+a]),j(c,T[4+b]);var d=document.createElement(\"div\");return j(d,T[1]),c.appendChild(d),d}function Q(b,d){function e(a,b,c){if(\"range\"===a||\"steps\"===a)return M.xVal;if(\"count\"===a){var d,e=100/(b-1),f=0;for(b=[];(d=f++*e)<=100;)b.push(d);a=\"positions\"}return\"positions\"===a?b.map(function(a){return M.fromStepping(c?M.getStep(a):a)}):\"values\"===a?c?b.map(function(a){return M.fromStepping(M.getStep(M.toStepping(a)))}):b:void 0}function m(b,c,d){var e=M.direction,f={},g=M.xVal[0],h=M.xVal[M.xVal.length-1],i=!1,j=!1,k=0;return M.direction=0,d=a(d.slice().sort(function(a,b){return a-b})),d[0]!==g&&(d.unshift(g),i=!0),d[d.length-1]!==h&&(d.push(h),j=!0),d.forEach(function(a,e){var g,h,l,m,n,o,p,q,r,s,t=a,u=d[e+1];if(\"steps\"===c&&(g=M.xNumSteps[e]),g||(g=u-t),t!==!1&&void 0!==u)for(h=t;u>=h;h+=g){for(m=M.toStepping(h),n=m-k,q=n/b,r=Math.round(q),s=n/r,l=1;r>=l;l+=1)o=k+l*s,f[o.toFixed(5)]=[\"x\",0];p=d.indexOf(h)>-1?1:\"steps\"===c?2:0,!e&&i&&(p=0),h===u&&j||(f[m.toFixed(5)]=[h,p]),k=m}}),M.direction=e,f}function n(a,b,c){function e(a){return[\"-normal\",\"-large\",\"-sub\"][a]}function f(a,b,c){return'class=\"'+b+\" \"+b+\"-\"+h+\" \"+b+e(c[1])+'\" style=\"'+d.style+\": \"+a+'%\"'}function g(a,d){M.direction&&(a=100-a),d[1]=d[1]&&b?b(d[0],d[1]):d[1],i.innerHTML+=\"<div \"+f(a,\"noUi-marker\",d)+\"></div>\",d[1]&&(i.innerHTML+=\"<div \"+f(a,\"noUi-value\",d)+\">\"+c.to(d[0])+\"</div>\")}var h=[\"horizontal\",\"vertical\"][d.ort],i=document.createElement(\"div\");return j(i,\"noUi-pips\"),j(i,\"noUi-pips-\"+h),Object.keys(a).forEach(function(b){g(b,a[b])}),i}function o(a){var b=a.mode,c=a.density||1,d=a.filter||!1,f=a.values||!1,g=a.stepped||!1,h=e(b,f,g),i=m(c,b,h),j=a.format||{to:Math.round};return I.appendChild(n(i,d,j))}function p(){return G[\"offset\"+[\"Width\",\"Height\"][d.ort]]}function q(a,b){void 0!==b&&(b=Math.abs(b-d.dir)),Object.keys(R).forEach(function(c){var d=c.split(\".\")[0];a===d&&R[c].forEach(function(a){a(h(B()),b,r(Array.prototype.slice.call(Q)))})})}function r(a){return 1===a.length?a[0]:d.dir?a.reverse():a}function s(a,b,c,e){var f=function(b){return I.hasAttribute(\"disabled\")?!1:l(I,T[14])?!1:(b=L(b),a===S.start&&void 0!==b.buttons&&b.buttons>1?!1:(b.calcPoint=b.points[d.ort],void c(b,e)))},g=[];return a.split(\" \").forEach(function(a){b.addEventListener(a,f,!1),g.push([a,f])}),g}function t(a,b){var c,d,e=b.handles||H,f=!1,g=100*(a.calcPoint-b.start)/p(),h=e[0]===H[0]?0:1;if(c=K(g,b.positions,e.length>1),f=y(e[0],c[h],1===e.length),e.length>1){if(f=y(e[1],c[h?0:1],!1)||f)for(d=0;d<b.handles.length;d++)q(\"slide\",d)}else f&&q(\"slide\",h)}function u(a,b){var c=G.getElementsByClassName(T[15]),d=b.handles[0]===H[0]?0:1;c.length&&k(c[0],T[15]),a.cursor&&(document.body.style.cursor=\"\",document.body.removeEventListener(\"selectstart\",document.body.noUiListener));var e=document.documentElement;e.noUiListeners.forEach(function(a){e.removeEventListener(a[0],a[1])}),k(I,T[12]),q(\"set\",d),q(\"change\",d)}function v(a,b){var c=document.documentElement;if(1===b.handles.length&&(j(b.handles[0].children[0],T[15]),b.handles[0].hasAttribute(\"disabled\")))return!1;a.stopPropagation();var d=s(S.move,c,t,{start:a.calcPoint,handles:b.handles,positions:[J[0],J[H.length-1]]}),e=s(S.end,c,u,{handles:b.handles});if(c.noUiListeners=d.concat(e),a.cursor){document.body.style.cursor=getComputedStyle(a.target).cursor,H.length>1&&j(I,T[12]);var f=function(){return!1};document.body.noUiListener=f,document.body.addEventListener(\"selectstart\",f,!1)}}function w(a){var b,e,g=a.calcPoint,h=0;return a.stopPropagation(),H.forEach(function(a){h+=c(a)[d.style]}),b=h/2>g||1===H.length?0:1,g-=c(G)[d.style],e=100*g/p(),d.events.snap||f(I,T[14],300),H[b].hasAttribute(\"disabled\")?!1:(y(H[b],e),q(\"slide\",b),q(\"set\",b),q(\"change\",b),void(d.events.snap&&v(a,{handles:[H[h]]})))}function x(a){var b,c;if(!a.fixed)for(b=0;b<H.length;b+=1)s(S.start,H[b].children[0],v,{handles:[H[b]]});a.tap&&s(S.start,G,w,{handles:H}),a.drag&&(c=[G.getElementsByClassName(T[7])[0]],j(c[0],T[10]),a.fixed&&c.push(H[c[0]===H[0]?1:0].children[0]),c.forEach(function(a){s(S.start,a,v,{handles:H})}))}function y(a,b,c){var e=a!==H[0]?1:0,f=J[0]+d.margin,h=J[1]-d.margin,i=J[0]+d.limit,l=J[1]-d.limit;return H.length>1&&(b=e?Math.max(b,f):Math.min(b,h)),c!==!1&&d.limit&&H.length>1&&(b=e?Math.min(b,i):Math.max(b,l)),b=M.getStep(b),b=g(parseFloat(b.toFixed(7))),b===J[e]?!1:(a.style[d.style]=b+\"%\",a.previousSibling||(k(a,T[17]),b>50&&j(a,T[17])),J[e]=b,Q[e]=M.fromStepping(b),q(\"update\",e),!0)}function z(a,b){var c,e,f;for(d.limit&&(a+=1),c=0;a>c;c+=1)e=c%2,f=b[e],null!==f&&f!==!1&&(\"number\"==typeof f&&(f=String(f)),f=d.format.from(f),(f===!1||isNaN(f)||y(H[e],M.toStepping(f),c===3-d.dir)===!1)&&q(\"update\",e))}function A(a){var b,c,e=h(a);for(d.dir&&d.handles>1&&e.reverse(),d.animate&&-1!==J[0]&&f(I,T[14],300),b=H.length>1?3:1,1===e.length&&(b=1),z(b,e),c=0;c<H.length;c++)q(\"set\",c)}function B(){var a,b=[];for(a=0;a<d.handles;a+=1)b[a]=d.format.to(Q[a]);return r(b)}function C(){T.forEach(function(a){a&&k(I,a)}),I.innerHTML=\"\",delete I.noUiSlider}function D(){var a=J.map(function(a,b){var c=M.getApplicableStep(a),d=i(String(c[2])),e=Q[b],f=100===a?null:c[2],g=Number((e-c[2]).toFixed(d)),h=0===a?null:g>=c[1]?c[2]:c[0]||!1;return[h,f]});return r(a)}function E(a,b){R[a]=R[a]||[],R[a].push(b),\"update\"===a.split(\".\")[0]&&H.forEach(function(a,b){q(\"update\",b)})}function F(a){var b=a.split(\".\")[0],c=a.substring(b.length);Object.keys(R).forEach(function(a){var d=a.split(\".\")[0],e=a.substring(d.length);b&&b!==d||c&&c!==e||delete R[a]})}var G,H,I=b,J=[-1,-1],M=d.spectrum,Q=[],R={};if(I.noUiSlider)throw new Error(\"Slider was already initialized.\");return G=P(d.dir,d.ort,I),H=O(d.handles,d.dir,G),N(d.connect,I,H),x(d.events),d.pips&&o(d.pips),{destroy:C,steps:D,on:E,off:F,get:B,set:A}}function R(a,b){if(!a.nodeName)throw new Error(\"noUiSlider.create requires a single element.\");var c=J(b,a),d=Q(a,c);d.set(c.start),a.noUiSlider=d}var S=window.navigator.pointerEnabled?{start:\"pointerdown\",move:\"pointermove\",end:\"pointerup\"}:window.navigator.msPointerEnabled?{start:\"MSPointerDown\",move:\"MSPointerMove\",end:\"MSPointerUp\"}:{start:\"mousedown touchstart\",move:\"mousemove touchmove\",end:\"mouseup touchend\"},T=[\"noUi-target\",\"noUi-base\",\"noUi-origin\",\"noUi-handle\",\"noUi-horizontal\",\"noUi-vertical\",\"noUi-background\",\"noUi-connect\",\"noUi-ltr\",\"noUi-rtl\",\"noUi-dragable\",\"\",\"noUi-state-drag\",\"\",\"noUi-state-tap\",\"noUi-active\",\"\",\"noUi-stacking\"];w.prototype.getMargin=function(a){return 2===this.xPct.length?n(this.xVal,a):!1},w.prototype.toStepping=function(a){return a=r(this.xVal,this.xPct,a),this.direction&&(a=100-a),a},w.prototype.fromStepping=function(a){return this.direction&&(a=100-a),e(s(this.xVal,this.xPct,a))},w.prototype.getStep=function(a){return this.direction&&(a=100-a),a=t(this.xPct,this.xSteps,this.snap,a),this.direction&&(a=100-a),a},w.prototype.getApplicableStep=function(a){var b=q(a,this.xPct),c=100===a?2:1;return[this.xNumSteps[b-2],this.xVal[b-c],this.xNumSteps[b-c]]},w.prototype.convert=function(a){return this.getStep(this.toStepping(a))};var U={to:function(a){return a.toFixed(2)},from:Number};return{create:R}});";var mod_pagespeed_noQVxfKHs1="(function($hx_exports){\"use strict\";$hx_exports[\"geometrize\"]=$hx_exports[\"geometrize\"]||{};$hx_exports[\"geometrize\"][\"shape\"]=$hx_exports[\"geometrize\"][\"shape\"]||{};;$hx_exports[\"geometrize\"][\"runner\"]=$hx_exports[\"geometrize\"][\"runner\"]||{};;$hx_exports[\"geometrize\"][\"exporter\"]=$hx_exports[\"geometrize\"][\"exporter\"]||{};;$hx_exports[\"geometrize\"][\"bitmap\"]=$hx_exports[\"geometrize\"][\"bitmap\"]||{};function $extend(from,fields){var proto=Object.create(from);for(var name in fields)proto[name]=fields[name];if(fields.toString!==Object.prototype.toString)proto.toString=fields.toString;return proto;}\nvar CanvasTools=function(){};CanvasTools.__name__=true;CanvasTools.downScaleCanvas=function(cv,scale){if(scale<=0.0||scale>=1.0){throw new js__$Boot_HaxeError(\"Scale must be a positive number < 1\");}\nvar sqScale=scale*scale;var sw=cv.width;var sh=cv.height;var tw=sw*scale|0;var th=sh*scale|0;var sx=0;var sy=0;var sIndex=0;var tx=0;var ty=0;var yIndex=0;var tIndex=0;var tX=0;var tY=0;var w=0.0;var nw=0.0;var wx=0.0;var nwx=0.0;var wy=0.0;var nwy=0.0;var crossX=false;var crossY=false;var sBuffer=cv.getContext(\"2d\").getImageData(0,0,sw,sh).data;var this1=new Float32Array(3*tw*th);var tBuffer=this1;var sR=0.0;var sG=0.0;var sB=0.0;while(sy<sh){ty=sy*scale|0;tY=ty|0;yIndex=3*tY*tw|0;crossY=tY!=(ty+scale|0);if(crossY){wy=tY+1-ty;nwy=ty+scale-tY-1;}\nsx=0;while(sx<sw){tx=sx*scale|0;tX=tx|0;tIndex=yIndex+tX*3|0;crossX=tX!=Math.floor(tx+scale);if(crossX){wx=tX+1-tx;nwx=tx+scale-tX-1|0;}\nsR=sBuffer[sIndex];sG=sBuffer[sIndex+1];sB=sBuffer[sIndex+2];if(!crossX&&!crossY){tBuffer[tIndex]+=sR*sqScale;tBuffer[tIndex+1]+=sG*sqScale;tBuffer[tIndex+2]+=sB*sqScale;}else if(crossX&&!crossY){w=wx*scale;tBuffer[tIndex]+=sR*w;tBuffer[tIndex+1]+=sG*w;tBuffer[tIndex+2]+=sB*w;nw=nwx*scale;tBuffer[tIndex+3]+=sR*nw;tBuffer[tIndex+4]+=sG*nw;tBuffer[tIndex+5]+=sB*nw;}else if(crossY&&!crossX){w=wy*scale;tBuffer[tIndex]+=sR*w;tBuffer[tIndex+1]+=sG*w;tBuffer[tIndex+2]+=sB*w;nw=nwy*scale;tBuffer[tIndex+3*tw]+=sR*nw;tBuffer[tIndex+3*tw+1]+=sG*nw;tBuffer[tIndex+3*tw+2]+=sB*nw;}else{w=wx*wy;tBuffer[tIndex]+=sR*w;tBuffer[tIndex+1]+=sG*w;tBuffer[tIndex+2]+=sB*w;nw=nwx*wy;tBuffer[tIndex+3]+=sR*nw;tBuffer[tIndex+4]+=sG*nw;tBuffer[tIndex+5]+=sB*nw;nw=wx*nwy;tBuffer[tIndex+3*tw]+=sR*nw;tBuffer[tIndex+3*tw+1]+=sG*nw;tBuffer[tIndex+3*tw+2]+=sB*nw;nw=nwx*nwy;tBuffer[tIndex+3*tw+3]+=sR*nw;tBuffer[tIndex+3*tw+4]+=sG*nw;tBuffer[tIndex+3*tw+5]+=sB*nw;}\nsIndex+=4;++sx;}\n++sy;}\nvar result=window.document.createElement(\"canvas\");result.width=tw;result.height=th;var resultContext=result.getContext(\"2d\");var resultImage=resultContext.getImageData(0,0,tw,th);var tByteBuffer=resultImage.data;var pxIndex=0;sIndex=0;tIndex=0;while(pxIndex<tw*th){tByteBuffer[tIndex]=Math.ceil(tBuffer[sIndex]);tByteBuffer[tIndex+1]=Math.ceil(tBuffer[sIndex+1]);tByteBuffer[tIndex+2]=Math.ceil(tBuffer[sIndex+2]);tByteBuffer[tIndex+3]=255;sIndex+=3;tIndex+=4;++pxIndex;}\nresultContext.putImageData(resultImage,0,0);return result;};var GeometrizeWorkerInterface=function(){var _gthis=this;this.worker=new Worker(\"js/geometrize_worker.js\");this.worker.onmessage=function(message){_gthis.onMessage(message.data);};};GeometrizeWorkerInterface.__name__=true;GeometrizeWorkerInterface.prototype={postMessage:function(message){this.worker.postMessage(message);},terminate:function(){this.worker.terminate();},onMessage:function(message){}};var HxOverrides=function(){};HxOverrides.__name__=true;HxOverrides.remove=function(a,obj){var i=a.indexOf(obj);if(i==-1){return false;}\na.splice(i,1);return true;};HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length;},next:function(){return this.arr[this.cur++];}};};var Main=function(){this.targetImage=null;this.shapeJsonData=[];this.shapeSvgData=[];this.shapeMutationsPerStep=100;this.candidateShapesPerStep=50;this.initialBackgroundOpacity=255;this.shapeOpacity=128;this.shapeTypes=geometrize__$ArraySet_ArraySet_$Impl_$.create([4]);this.maxInputImageSize=768;window.onload=$bind(this,this.onWindowLoaded);};Main.__name__=true;Main.main=function(){var main=new Main();};Main.prototype={get_shapeCount:function(){return this.shapeSvgData.length;},get_maxShapeCountLimit:function(){var text=Main.maxShapesCapTextEdit.value;var value=Std.parseInt(text);if(value!=null){return value;}\nreturn 3000;},set_maxShapeCountLimit:function(limit){Main.maxShapesCapTextEdit.value=limit==null?\"null\":\"\"+limit;return limit;},onWindowLoaded:function(){Main.rotatedEllipsesCheckbox.checked=true;var _gthis=this;noUiSlider.create(Main.shapeOpacitySlider,{start:[this.shapeOpacity],connect:\"lower\",range:{\"min\":[1,1],\"max\":[255]},pips:{mode:\"range\",density:10}});this.createTooltips(Main.shapeOpacitySlider);Main.shapeOpacitySlider.noUiSlider.on(\"change\",function(values,handle,rawValues){_gthis.shapeOpacity=values[handle]|0;});Main.shapeOpacitySlider.noUiSlider.on(\"update\",function(values1,handle1,rawValues1){_gthis.updateTooltips(Main.shapeOpacitySlider,handle1,values1[handle1]|0);});noUiSlider.create(Main.initialBackgroundOpacitySlider,{start:[this.initialBackgroundOpacity],connect:\"lower\",range:{\"min\":[0,1],\"max\":[255]},pips:{mode:\"range\",density:10}});this.createTooltips(Main.initialBackgroundOpacitySlider);Main.initialBackgroundOpacitySlider.noUiSlider.on(\"change\",function(values2,handle2,rawValues2){_gthis.initialBackgroundOpacity=values2[handle2]|0;});Main.initialBackgroundOpacitySlider.noUiSlider.on(\"update\",function(values3,handle3,rawValues3){_gthis.updateTooltips(Main.initialBackgroundOpacitySlider,handle3,values3[handle3]|0);});noUiSlider.create(Main.randomShapesPerStepSlider,{start:[this.candidateShapesPerStep],connect:\"lower\",range:{\"min\":[10,1],\"max\":[300]},pips:{mode:\"range\",density:10}});this.createTooltips(Main.randomShapesPerStepSlider);Main.randomShapesPerStepSlider.noUiSlider.on(\"change\",function(values4,handle4,rawValues4){_gthis.candidateShapesPerStep=values4[handle4]|0;});Main.randomShapesPerStepSlider.noUiSlider.on(\"update\",function(values5,handle5,rawValues5){_gthis.updateTooltips(Main.randomShapesPerStepSlider,handle5,values5[handle5]|0);});noUiSlider.create(Main.shapeMutationsPerStepSlider,{start:[this.shapeMutationsPerStep],connect:\"lower\",range:{\"min\":[10,1],\"max\":[300]},pips:{mode:\"range\",density:10}});this.createTooltips(Main.shapeMutationsPerStepSlider);Main.shapeMutationsPerStepSlider.noUiSlider.on(\"change\",function(values6,handle6,rawValues6){_gthis.shapeMutationsPerStep=values6[handle6]|0;});Main.shapeMutationsPerStepSlider.noUiSlider.on(\"update\",function(values7,handle7,rawValues7){_gthis.updateTooltips(Main.shapeMutationsPerStepSlider,handle7,values7[handle7]|0);});var _gthis1=this;Main.runPauseButton.addEventListener(\"click\",function(){_gthis1.set_running(!_gthis1.running);},false);Main.openImageFileInput.addEventListener(\"change\",function(e){if(Main.openImageFileInput.files==null||Main.openImageFileInput.files.length==0){return;}\nvar file=Main.openImageFileInput.files[0];var fileReader=new FileReader();fileReader.onload=function(e1){var image=new Image();image.onload=function(e2){var canvas=_gthis1.imageToCanvas(image);while(canvas.width>_gthis1.maxInputImageSize||canvas.height>_gthis1.maxInputImageSize)canvas=CanvasTools.downScaleCanvas(canvas,0.5);_gthis1.targetImage=_gthis1.canvasToBitmap(canvas);_gthis1.onTargetImageChanged();};image.src=fileReader.result;};fileReader.readAsDataURL(file);Main.openImageFileInput.files[0]=null;},false);Main.stepButton.addEventListener(\"click\",function(){_gthis1.stepRunner();},false);Main.randomImageButton.addEventListener(\"click\",function(){var image1=new Image();image1.onload=function(){Main.sampleImagesContainer.appendChild(image1);var tmp=_gthis1.imageToCanvas(image1);_gthis1.targetImage=_gthis1.canvasToBitmap(tmp);_gthis1.onTargetImageChanged();};var tmp1=Main.imagesToGeometrize;var tmp2=Math.floor(Math.random()*Main.imagesToGeometrize.length);image1.src=tmp1[tmp2];},false);Main.resetButton.addEventListener(\"click\",function(){_gthis1.targetImage=_gthis1.targetImage;_gthis1.onTargetImageChanged();},false);Main.saveImageButton.addEventListener(\"click\",function(e3){var svgData=\"data:image/svg+xml;base64,\"+window.btoa(_gthis1.makeSvgData());var svgImage=new Image();svgImage.onload=function(){var canvas1=_gthis1.imageToCanvas(svgImage);if(canvas1.msToBlob!=null){var blob=canvas1.msToBlob();var navigator=window.navigator;navigator.msSaveBlob(blob,\"geometrized_image.png\");}else{var data=canvas1.toDataURL(\"image/png\").replace(\"image/png\",\"image/octet-stream\");var tempLink=window.document.createElement(\"a\");tempLink.href=data;tempLink.download=\"geometrized_image.png\";window.document.body.appendChild(tempLink);tempLink.click();window.document.body.removeChild(tempLink);}};svgImage.setAttribute(\"src\",svgData);},false);var saveBlob=function(data1,dataType,filename,anchor){var blob1=new Blob([data1],{type:dataType});var navigator1=window.navigator;if(navigator1.msSaveBlob!=null){navigator1.msSaveBlob(blob1,filename);}else{var dataUrl=URL.createObjectURL(blob1);anchor.download=filename;anchor.href=dataUrl;}};Main.saveSvgButton.addEventListener(\"click\",function(e4){saveBlob(Main.currentSvgContainer.innerHTML,\"image/svg+xml;charset=utf-8\",\"geometrized_svg.svg\",Main.saveSvgButton);},false);Main.saveJsonButton.addEventListener(\"click\",function(e5){var tmp3=\"[\\r\\n\"+_gthis1.shapeJsonData.join(\",\\r\\n\")+\"\\r\\n]\";saveBlob(tmp3,\"data:text/json;charset=utf-8\",\"geometrized_json.json\",Main.saveJsonButton);},false);var setShapeOption=function(option,enable){if(enable){geometrize__$ArraySet_ArraySet_$Impl_$.add(_gthis1.shapeTypes,option);}else{HxOverrides.remove(_gthis1.shapeTypes,option);}};Main.rectanglesCheckbox.addEventListener(\"click\",function(){setShapeOption(0,Main.rectanglesCheckbox.checked);},false);Main.rotatedRectanglesCheckbox.addEventListener(\"click\",function(){setShapeOption(1,Main.rotatedRectanglesCheckbox.checked);},false);Main.trianglesCheckbox.addEventListener(\"click\",function(){setShapeOption(2,Main.trianglesCheckbox.checked);},false);Main.ellipsesCheckbox.addEventListener(\"click\",function(){setShapeOption(3,Main.ellipsesCheckbox.checked);},false);Main.rotatedEllipsesCheckbox.addEventListener(\"click\",function(){setShapeOption(4,Main.rotatedEllipsesCheckbox.checked);},false);Main.circlesCheckbox.addEventListener(\"click\",function(){setShapeOption(5,Main.circlesCheckbox.checked);},false);Main.linesCheckbox.addEventListener(\"click\",function(){setShapeOption(6,Main.linesCheckbox.checked);},false);Main.quadraticBeziersCheckbox.addEventListener(\"click\",function(){setShapeOption(7,Main.quadraticBeziersCheckbox.checked);},false);this.set_maxShapeCountLimit(3000);if(this.worker!=null){this.worker.terminate();}\nthis.worker=new GeometrizeWorkerInterface();this.worker.onMessage=$bind(this,this.onWorkerMessageReceived);this.targetImage=this.createDefaultBitmap();this.onTargetImageChanged();this.set_running(true);},createTooltips:function(slider){var tipHandles=slider.getElementsByClassName(\"noUi-handle\");var _g=0;var _g1=tipHandles.length;while(_g<_g1){var i=_g++;var div=window.document.createElement(\"div\");div.className+=\"tooltip\";tipHandles[i].appendChild(div);this.updateTooltips(slider,i,0);}},updateTooltips:function(slider,handleIdx,value){var tipHandles=slider.getElementsByClassName(\"noUi-handle\");tipHandles[handleIdx].innerHTML=\"<span class='tooltip'>\"+(value==null?\"null\":\"\"+value)+\"</span>\";},checkStopConditions:function(){if(this.get_shapeCount()>=this.get_maxShapeCountLimit()){this.set_running(false);}},stepRunner:function(){var options={shapeTypes:this.shapeTypes.length==0?[2]:geometrize__$ArraySet_ArraySet_$Impl_$.toArray(this.shapeTypes),alpha:this.shapeOpacity|0,candidateShapesPerStep:this.candidateShapesPerStep,shapeMutationsPerStep:this.shapeMutationsPerStep};this.worker.postMessage({id:\"should_step\",data:options});},onWorkerMessageReceived:function(message){switch(message.id){case\"did_set_target_image\":break;case\"did_step\":this.shapeJsonData.push(message.jsonData);this.appendSvgShapeData(message.svgData);this.checkStopConditions();break;}\nif(this.running){this.stepRunner();}},appendSvgShapeData:function(data){this.shapeSvgData.push(data);var tmp=this.get_shapeCount();Main.shapesAddedText.innerHTML=Std.string(tmp);var data1=this.makeSvgData();this.setSvgElement(data1);},setSvgElement:function(svgCode){Main.currentSvgContainer.innerHTML=svgCode;},canvasToBitmap:function(canvas){var context=canvas.getContext(\"2d\",null);var imageData=context.getImageData(0,0,canvas.width,canvas.height);var bytesData=new haxe_io_Bytes(new ArrayBuffer(imageData.data.length));var _g=0;var _g1=bytesData.length;while(_g<_g1){var i=_g++;bytesData.b[i]=imageData.data[i];}\nvar w=canvas.width;var h=canvas.height;var bitmap=new geometrize_bitmap_Bitmap();if(!(bytesData!=null)){throw new js__$Boot_HaxeError(\"FAIL: bytes != null\");}\nvar actual=bytesData.length;var expected=w*h*4;if(actual!=expected){throw new js__$Boot_HaxeError(\"FAIL: values are not equal (expected: \"+expected+\", actual: \"+actual+\")\");}\nbitmap.width=w;bitmap.height=h;var this1=new Array(bytesData.length/4|0);bitmap.data=this1;var i1=0;var x=0;while(i1<bytesData.length){var red=bytesData.b[i1];var green=bytesData.b[i1+1];var blue=bytesData.b[i1+2];var alpha=bytesData.b[i1+3];if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nbitmap.data[x]=((red<0?0:red>255?255:red)<<24)+((green<0?0:green>255?255:green)<<16)+((blue<0?0:blue>255?255:blue)<<8)+(alpha<0?0:alpha>255?255:alpha);i1+=4;++x;}\nvar bitmap1=bitmap;return bitmap1;},imageToCanvas:function(image){var canvas=window.document.createElement(\"canvas\");canvas.width=image.width;canvas.height=image.height;var context=canvas.getContext(\"2d\",null);context.drawImage(image,0,0);return canvas;},createDefaultBitmap:function(){return this.canvasToBitmap(this.imageToCanvas(Main.defaultImageElement));},onTargetImageChanged:function(){var backgroundColor=geometrize_Util.getAverageImageColor(this.targetImage);var red=(backgroundColor>>24&255)*this.initialBackgroundOpacity/255.0|0;var green=(backgroundColor>>16&255)*this.initialBackgroundOpacity/255.0|0;var blue=(backgroundColor>>8&255)*this.initialBackgroundOpacity/255.0|0;var alpha=this.initialBackgroundOpacity|0;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nvar premultipliedColor=((red<0?0:red>255?255:red)<<24)+((green<0?0:green>255?255:green)<<16)+((blue<0?0:blue>255?255:blue)<<8)+(alpha<0?0:alpha>255?255:alpha);var backgroundRect=new geometrize_shape_Rectangle(this.targetImage.width,this.targetImage.height);backgroundRect.x1=0;backgroundRect.y1=0;backgroundRect.x2=this.targetImage.width-1;backgroundRect.y2=this.targetImage.height-1;this.shapeSvgData=[];this.shapeJsonData=[];this.appendSvgShapeData(geometrize_exporter_SvgExporter.exportShape({score:0.0,color:premultipliedColor,shape:backgroundRect}));this.shapeJsonData.push(geometrize_exporter_ShapeJsonExporter.exportShape({score:0.0,color:premultipliedColor,shape:backgroundRect}));if(this.worker!=null){this.worker.terminate();}\nthis.worker=new GeometrizeWorkerInterface();this.worker.onMessage=$bind(this,this.onWorkerMessageReceived);this.worker.postMessage({id:\"should_set_target_image\",data:this.targetImage});if(this.running){this.stepRunner();}},makeSvgData:function(){return geometrize_exporter_SvgExporter.getSvgPrelude()+geometrize_exporter_SvgExporter.getSvgNodeOpen(this.targetImage.width,this.targetImage.height)+Std.string(this.shapeSvgData)+geometrize_exporter_SvgExporter.getSvgNodeClose();},set_running:function(running){Main.runPauseButton.innerHTML=running?\"<h2>Pause</h2>\":\"<h2>Run</h2>\";var wasRunning=this.running;this.running=running;if(!wasRunning&&this.running){this.stepRunner();}\nreturn this.running;}};Math.__name__=true;var Std=function(){};Std.__name__=true;Std.string=function(s){return js_Boot.__string_rec(s,\"\");};Std.parseInt=function(x){var v=parseInt(x,x&&x[0]==\"0\"&&(x[1]==\"x\"||x[1]==\"X\")?16:10);if(isNaN(v)){return null;}\nreturn v;};Std.random=function(x){if(x<=0){return 0;}else{return Math.floor(Math.random()*x);}};var StringTools=function(){};StringTools.__name__=true;StringTools.replace=function(s,sub,by){return s.split(sub).join(by);};var _$UInt_UInt_$Impl_$={};_$UInt_UInt_$Impl_$.__name__=true;_$UInt_UInt_$Impl_$.toFloat=function(this1){var int=this1;if(int<0){return 4294967296.0+int;}else{return int+0.0;}};var geometrize__$ArraySet_ArraySet_$Impl_$={};geometrize__$ArraySet_ArraySet_$Impl_$.__name__=true;geometrize__$ArraySet_ArraySet_$Impl_$.create=function(array){if(array==null){var this1=[];return this1;}\nreturn geometrize__$ArraySet_ArraySet_$Impl_$.toSet(array);};geometrize__$ArraySet_ArraySet_$Impl_$.add=function(this1,element){if(!(element!=null)){throw new js__$Boot_HaxeError(\"FAIL: element != null\");}\nif(geometrize__$ArraySet_ArraySet_$Impl_$.contains(this1,element)){return false;}\nthis1.push(element);return true;};geometrize__$ArraySet_ArraySet_$Impl_$.contains=function(this1,element){var _g=0;while(_g<this1.length){var i=this1[_g];++_g;if(i==element){return true;}}\nreturn false;};geometrize__$ArraySet_ArraySet_$Impl_$.toArray=function(this1){return this1.slice();};geometrize__$ArraySet_ArraySet_$Impl_$.toSet=function(array){var this1=[];var set=this1;var _g=0;while(_g<array.length){var v=array[_g];++_g;geometrize__$ArraySet_ArraySet_$Impl_$.add(set,v);}\nreturn set;};var geometrize_Core=function(){};geometrize_Core.__name__=true;geometrize_Core.computeColor=function(target,current,lines,alpha){if(!(target!=null)){throw new js__$Boot_HaxeError(\"FAIL: target != null\");}\nif(!(current!=null)){throw new js__$Boot_HaxeError(\"FAIL: current != null\");}\nif(!(lines!=null)){throw new js__$Boot_HaxeError(\"FAIL: lines != null\");}\nif(!(alpha>=0)){throw new js__$Boot_HaxeError(\"FAIL: alpha >= 0\");}\nvar totalRed=0;var totalGreen=0;var totalBlue=0;var count=0;var f=65535/alpha;var a=f|0;var _g=0;while(_g<lines.length){var line=lines[_g];++_g;var y=line.y;var _g1=line.x1;var _g11=line.x2+1;while(_g1<_g11){var x=_g1++;var t=target.data[target.width*y+x];var c=current.data[current.width*y+x];totalRed+=((t>>24&255)-(c>>24&255))*a+(c>>24&255)*257;totalGreen+=((t>>16&255)-(c>>16&255))*a+(c>>16&255)*257;totalBlue+=((t>>8&255)-(c>>8&255))*a+(c>>8&255)*257;++count;}}\nif(count==0){return 0;}\nvar value=(totalRed/count|0)>>8;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nvar r=value<0?0:value>255?255:value;var value1=(totalGreen/count|0)>>8;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nvar g=value1<0?0:value1>255?255:value1;var value2=(totalBlue/count|0)>>8;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nvar b=value2<0?0:value2>255?255:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nreturn((r<0?0:r>255?255:r)<<24)+((g<0?0:g>255?255:g)<<16)+((b<0?0:b>255?255:b)<<8)+(alpha<0?0:alpha>255?255:alpha);};geometrize_Core.differenceFull=function(first,second){if(!(first!=null)){throw new js__$Boot_HaxeError(\"FAIL: first != null\");}\nif(!(second!=null)){throw new js__$Boot_HaxeError(\"FAIL: second != null\");}\nif(!(first.width!=0)){throw new js__$Boot_HaxeError(\"FAIL: first.width != 0\");}\nif(!(first.height!=0)){throw new js__$Boot_HaxeError(\"FAIL: first.height != 0\");}\nif(!(second.width!=0)){throw new js__$Boot_HaxeError(\"FAIL: second.width != 0\");}\nif(!(second.height!=0)){throw new js__$Boot_HaxeError(\"FAIL: second.height != 0\");}\nvar actual=first.width;var expected=second.width;if(actual!=expected){throw new js__$Boot_HaxeError(\"FAIL: values are not equal (expected: \"+expected+\", actual: \"+actual+\")\");}\nvar actual1=first.height;var expected1=second.height;if(actual1!=expected1){throw new js__$Boot_HaxeError(\"FAIL: values are not equal (expected: \"+expected1+\", actual: \"+actual1+\")\");}\nvar total=0;var width=first.width;var height=first.height;var _g=0;var _g1=height;while(_g<_g1){var y=_g++;var _g2=0;var _g11=width;while(_g2<_g11){var x=_g2++;var f=first.data[first.width*y+x];var s=second.data[second.width*y+x];var dr=(f>>24&255)-(s>>24&255);var dg=(f>>16&255)-(s>>16&255);var db=(f>>8&255)-(s>>8&255);var da=(f&255)-(s&255);total+=dr*dr+dg*dg+db*db+da*da;}}\nvar result=Math.sqrt(total/(width*height*4.0))/255;if(!isFinite(result)){throw new js__$Boot_HaxeError(\"FAIL: Math.isFinite(result)\");}\nreturn result;};geometrize_Core.differencePartial=function(target,before,after,score,lines){if(!(target!=null)){throw new js__$Boot_HaxeError(\"FAIL: target != null\");}\nif(!(before!=null)){throw new js__$Boot_HaxeError(\"FAIL: before != null\");}\nif(!(after!=null)){throw new js__$Boot_HaxeError(\"FAIL: after != null\");}\nif(!(lines!=null)){throw new js__$Boot_HaxeError(\"FAIL: lines != null\");}\nif(!(lines.length!=0)){throw new js__$Boot_HaxeError(\"FAIL: lines.length != 0\");}\nvar width=target.width;var height=target.height;var rgbaCount=width*height*4;var total=Math.pow(score*255,2)*rgbaCount;var _g=0;while(_g<lines.length){var line=lines[_g];++_g;var y=line.y;var _g1=line.x1;var _g11=line.x2+1;while(_g1<_g11){var x=_g1++;var t=target.data[target.width*y+x];var b=before.data[before.width*y+x];var a=after.data[after.width*y+x];var dtbr=(t>>24&255)-(b>>24&255);var dtbg=(t>>16&255)-(b>>16&255);var dtbb=(t>>8&255)-(b>>8&255);var dtba=(t&255)-(b&255);var dtar=(t>>24&255)-(a>>24&255);var dtag=(t>>16&255)-(a>>16&255);var dtab=(t>>8&255)-(a>>8&255);var dtaa=(t&255)-(a&255);total-=dtbr*dtbr+dtbg*dtbg+dtbb*dtbb+dtba*dtba;total+=dtar*dtar+dtag*dtag+dtab*dtab+dtaa*dtaa;}}\nvar result=Math.sqrt(total/rgbaCount)/255;if(!isFinite(result)){throw new js__$Boot_HaxeError(\"FAIL: Math.isFinite(result)\");}\nreturn result;};geometrize_Core.bestRandomState=function(shapes,alpha,n,target,current,buffer,lastScore){var bestEnergy=0;var bestState=null;var _g=0;var _g1=n;while(_g<_g1){var i=_g++;var state=new geometrize_State(geometrize_shape_ShapeFactory.randomShapeOf(shapes,current.width,current.height),alpha,target,current,buffer);var energy=state.energy(lastScore);if(i==0||energy<bestEnergy){bestEnergy=energy;bestState=state;}}\nreturn bestState;};geometrize_Core.bestHillClimbState=function(shapes,alpha,n,age,target,current,buffer,lastScore){var state=geometrize_Core.bestRandomState(shapes,alpha,n,target,current,buffer,lastScore);state=geometrize_Core.hillClimb(state,age,lastScore);return state;};geometrize_Core.hillClimb=function(state,maxAge,lastScore){if(!(state!=null)){throw new js__$Boot_HaxeError(\"FAIL: state != null\");}\nif(!(maxAge>=0)){throw new js__$Boot_HaxeError(\"FAIL: maxAge >= 0\");}\nvar state1=state.clone();var bestState=state1.clone();var bestEnergy=state1.energy(lastScore);var age=0;while(age<maxAge){var undo=state1.mutate();var energy=state1.energy(lastScore);if(energy>=bestEnergy){state1=undo;}else{bestEnergy=energy;bestState=state1.clone();age=-1;}\n++age;}\nreturn bestState;};geometrize_Core.energy=function(shape,alpha,target,current,buffer,score){if(!(shape!=null)){throw new js__$Boot_HaxeError(\"FAIL: shape != null\");}\nif(!(target!=null)){throw new js__$Boot_HaxeError(\"FAIL: target != null\");}\nif(!(current!=null)){throw new js__$Boot_HaxeError(\"FAIL: current != null\");}\nif(!(buffer!=null)){throw new js__$Boot_HaxeError(\"FAIL: buffer != null\");}\nvar lines=shape.rasterize();if(!(lines!=null)){throw new js__$Boot_HaxeError(\"FAIL: lines != null\");}\nif(!(lines.length!=0)){throw new js__$Boot_HaxeError(\"FAIL: lines.length != 0\");}\nvar color=geometrize_Core.computeColor(target,current,lines,alpha);geometrize_rasterizer_Rasterizer.copyLines(buffer,current,lines);geometrize_rasterizer_Rasterizer.drawLines(buffer,color,lines);return geometrize_Core.differencePartial(target,current,buffer,score,lines);};var geometrize_Model=function(target,backgroundColor){if(!(target!=null)){throw new js__$Boot_HaxeError(\"FAIL: target != null\");}\nthis.width=target.width;this.height=target.height;this.target=target;var w=target.width;var h=target.height;var bitmap=new geometrize_bitmap_Bitmap();bitmap.width=w;bitmap.height=h;var this1=new Array(w*h);bitmap.data=this1;var i=0;while(i<bitmap.data.length){bitmap.data[i]=backgroundColor;++i;}\nthis.current=bitmap;var w1=target.width;var h1=target.height;var bitmap1=new geometrize_bitmap_Bitmap();bitmap1.width=w1;bitmap1.height=h1;var this2=new Array(w1*h1);bitmap1.data=this2;var i1=0;while(i1<bitmap1.data.length){bitmap1.data[i1]=backgroundColor;++i1;}\nthis.buffer=bitmap1;this.score=geometrize_Core.differenceFull(target,this.current);};geometrize_Model.__name__=true;geometrize_Model.prototype={step:function(shapeTypes,alpha,n,age){var state=geometrize_Core.bestHillClimbState(shapeTypes,alpha,n,age,this.target,this.current,this.buffer,this.score);var results=[this.addShape(state.shape,state.alpha)];return results;},addShape:function(shape,alpha){if(!(shape!=null)){throw new js__$Boot_HaxeError(\"FAIL: shape != null\");}\nvar _this=this.current;var bitmap=new geometrize_bitmap_Bitmap();bitmap.width=_this.width;bitmap.height=_this.height;var this1=new Array(_this.data.length);bitmap.data=this1;var _g=0;var _g1=_this.data.length;while(_g<_g1){var i=_g++;bitmap.data[i]=_this.data[i];}\nvar before=bitmap;var lines=shape.rasterize();var color=geometrize_Core.computeColor(this.target,this.current,lines,alpha);geometrize_rasterizer_Rasterizer.drawLines(this.current,color,lines);this.score=geometrize_Core.differencePartial(this.target,before,this.current,this.score,lines);var result={score:this.score,color:color,shape:shape};return result;}};var geometrize_State=function(shape,alpha,target,current,buffer){if(!(shape!=null)){throw new js__$Boot_HaxeError(\"FAIL: shape != null\");}\nthis.shape=shape;this.alpha=alpha;this.score=-1;this.target=target;this.current=current;this.buffer=buffer;};geometrize_State.__name__=true;geometrize_State.prototype={energy:function(lastScore){if(this.score<0){this.score=geometrize_Core.energy(this.shape,this.alpha,this.target,this.current,this.buffer,lastScore);}\nreturn this.score;},mutate:function(){var oldState=this.clone();this.shape.mutate();return oldState;},clone:function(){return new geometrize_State(this.shape.clone(),this.alpha,this.target,this.current,this.buffer);}};var geometrize_Util=function(){};geometrize_Util.__name__=true;geometrize_Util.getAverageImageColor=function(image,alpha){if(alpha==null){alpha=255;}\nif(!(image!=null)){throw new js__$Boot_HaxeError(\"FAIL: image != null\");}\nvar totalRed=0;var totalGreen=0;var totalBlue=0;var _g=0;var _g1=image.width;while(_g<_g1){var x=_g++;var _g2=0;var _g11=image.height;while(_g2<_g11){var y=_g2++;var pixel=image.data[image.width*y+x];totalRed+=pixel>>24&255;totalGreen+=pixel>>16&255;totalBlue+=pixel>>8&255;}}\nvar size=image.width*image.height;var red=totalRed/size|0;var green=totalGreen/size|0;var blue=totalBlue/size|0;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nreturn((red<0?0:red>255?255:red)<<24)+((green<0?0:green>255?255:green)<<16)+((blue<0?0:blue>255?255:blue)<<8)+(alpha<0?0:alpha>255?255:alpha);};var geometrize_bitmap_Bitmap=$hx_exports[\"geometrize\"][\"bitmap\"][\"Bitmap\"]=function(){};geometrize_bitmap_Bitmap.__name__=true;geometrize_bitmap_Bitmap.create=function(w,h,color){var bitmap=new geometrize_bitmap_Bitmap();bitmap.width=w;bitmap.height=h;var this1=new Array(w*h);bitmap.data=this1;var i=0;while(i<bitmap.data.length){bitmap.data[i]=color;++i;}\nreturn bitmap;};geometrize_bitmap_Bitmap.createFromBytes=function(w,h,bytes){var bitmap=new geometrize_bitmap_Bitmap();if(!(bytes!=null)){throw new js__$Boot_HaxeError(\"FAIL: bytes != null\");}\nvar actual=bytes.length;var expected=w*h*4;if(actual!=expected){throw new js__$Boot_HaxeError(\"FAIL: values are not equal (expected: \"+expected+\", actual: \"+actual+\")\");}\nbitmap.width=w;bitmap.height=h;var this1=new Array(bytes.length/4|0);bitmap.data=this1;var i=0;var x=0;while(i<bytes.length){var red=bytes.b[i];var green=bytes.b[i+1];var blue=bytes.b[i+2];var alpha=bytes.b[i+3];if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nbitmap.data[x]=((red<0?0:red>255?255:red)<<24)+((green<0?0:green>255?255:green)<<16)+((blue<0?0:blue>255?255:blue)<<8)+(alpha<0?0:alpha>255?255:alpha);i+=4;++x;}\nreturn bitmap;};geometrize_bitmap_Bitmap.createFromByteArray=function(w,h,bytes){var data=new haxe_io_Bytes(new ArrayBuffer(bytes.length));var i=0;while(i<bytes.length){data.b[i]=bytes[i];++i;}\nvar bitmap=new geometrize_bitmap_Bitmap();if(!(data!=null)){throw new js__$Boot_HaxeError(\"FAIL: bytes != null\");}\nvar actual=data.length;var expected=w*h*4;if(actual!=expected){throw new js__$Boot_HaxeError(\"FAIL: values are not equal (expected: \"+expected+\", actual: \"+actual+\")\");}\nbitmap.width=w;bitmap.height=h;var this1=new Array(data.length/4|0);bitmap.data=this1;var i1=0;var x=0;while(i1<data.length){var red=data.b[i1];var green=data.b[i1+1];var blue=data.b[i1+2];var alpha=data.b[i1+3];if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nbitmap.data[x]=((red<0?0:red>255?255:red)<<24)+((green<0?0:green>255?255:green)<<16)+((blue<0?0:blue>255?255:blue)<<8)+(alpha<0?0:alpha>255?255:alpha);i1+=4;++x;}\nreturn bitmap;};geometrize_bitmap_Bitmap.prototype={getPixel:function(x,y){return this.data[this.width*y+x];},setPixel:function(x,y,color){this.data[this.width*y+x]=color;},clone:function(){var bitmap=new geometrize_bitmap_Bitmap();bitmap.width=this.width;bitmap.height=this.height;var this1=new Array(this.data.length);bitmap.data=this1;var _g=0;var _g1=this.data.length;while(_g<_g1){var i=_g++;bitmap.data[i]=this.data[i];}\nreturn bitmap;},fill:function(color){var idx=0;while(idx<this.data.length){this.data[idx]=color>>24&255;this.data[idx+1]=color>>16&255;this.data[idx+2]=color>>8&255;this.data[idx+3]=color&255;idx+=4;}},getBytes:function(){var bytes=new haxe_io_Bytes(new ArrayBuffer(this.data.length*4));var i=0;while(i<this.data.length){var idx=i*4;bytes.b[idx]=this.data[i]>>24&255;bytes.b[idx+1]=this.data[i]>>16&255;bytes.b[idx+2]=this.data[i]>>8&255;bytes.b[idx+3]=this.data[i]&255;++i;}\nreturn bytes;}};var geometrize_exporter_ShapeJsonExporter=$hx_exports[\"geometrize\"][\"exporter\"][\"ShapeJsonExporter\"]=function(){};geometrize_exporter_ShapeJsonExporter.__name__=true;geometrize_exporter_ShapeJsonExporter.export=function(shapes){return\"[\\n\"+geometrize_exporter_ShapeJsonExporter.exportShapes(shapes)+\"\\n]\";};geometrize_exporter_ShapeJsonExporter.exportShapes=function(shapes){var results=\"\";var _g=0;var _g1=shapes.length;while(_g<_g1){var i=_g++;results+=geometrize_exporter_ShapeJsonExporter.exportShape(shapes[i]);if(i!=shapes.length-1){results+=\"\\n\";}}\nreturn results;};geometrize_exporter_ShapeJsonExporter.exportShape=function(shape){var result=\"    {\\n\";var type=shape.shape.getType();var data=shape.shape.getRawShapeData();var color=shape.color;var score=shape.score;result+=\"        \\\"type\\\":\"+type+\",\\n\";result+=\"        \\\"data\\\":\"+\"[\";var _g=0;var _g1=data.length;while(_g<_g1){var item=_g++;result+=data[item];if(item<=data.length-2){result+=\",\";}}\nresult+=\"],\\n\";result+=\"        \\\"color\\\":\"+\"[\";result+=(color>>24&255)+\",\";result+=(color>>16&255)+\",\";result+=(color>>8&255)+\",\";result+=color&255;result+=\"],\\n\";result+=\"        \\\"score\\\":\"+score+\"\\n\";result+=\"    }\";return result;};var geometrize_exporter_SvgExporter=$hx_exports[\"geometrize\"][\"exporter\"][\"SvgExporter\"]=function(){};geometrize_exporter_SvgExporter.__name__=true;geometrize_exporter_SvgExporter.export=function(shapes,width,height){var results=geometrize_exporter_SvgExporter.getSvgPrelude();results+=geometrize_exporter_SvgExporter.getSvgNodeOpen(width,height);results+=geometrize_exporter_SvgExporter.exportShapes(shapes);results+=geometrize_exporter_SvgExporter.getSvgNodeClose();return results;};geometrize_exporter_SvgExporter.exportShapes=function(shapes){var results=\"\";var _g=0;var _g1=shapes.length;while(_g<_g1){var i=_g++;results+=geometrize_exporter_SvgExporter.exportShape(shapes[i]);if(i!=shapes.length-1){results+=\"\\n\";}}\nreturn results;};geometrize_exporter_SvgExporter.exportShape=function(shape){return StringTools.replace(shape.shape.getSvgShapeData(),geometrize_exporter_SvgExporter.SVG_STYLE_HOOK,geometrize_exporter_SvgExporter.stylesForShape(shape));};geometrize_exporter_SvgExporter.getSvgPrelude=function(){return\"<?xml version=\\\"1.0\\\" standalone=\\\"no\\\"?>\\n\";};geometrize_exporter_SvgExporter.getSvgNodeOpen=function(width,height){return\"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" version=\\\"1.2\\\" baseProfile=\\\"tiny\\\" width=\\\"\"+width+\"\\\" height=\\\"\"+height+\"\\\">\\n\";};geometrize_exporter_SvgExporter.getSvgNodeClose=function(){return\"</svg>\";};geometrize_exporter_SvgExporter.stylesForShape=function(shape){switch(shape.shape.getType()){case 6:case 7:return geometrize_exporter_SvgExporter.strokeForColor(shape.color)+\" stroke-width=\\\"1\\\" fill=\\\"none\\\" \"+geometrize_exporter_SvgExporter.strokeOpacityForAlpha(shape.color&255);default:return geometrize_exporter_SvgExporter.fillForColor(shape.color)+\" \"+geometrize_exporter_SvgExporter.fillOpacityForAlpha(shape.color&255);}};geometrize_exporter_SvgExporter.rgbForColor=function(color){return\"rgb(\"+(color>>24&255)+\",\"+(color>>16&255)+\",\"+(color>>8&255)+\")\";};geometrize_exporter_SvgExporter.strokeForColor=function(color){return\"stroke=\\\"\"+geometrize_exporter_SvgExporter.rgbForColor(color)+\"\\\"\";};geometrize_exporter_SvgExporter.fillForColor=function(color){return\"fill=\\\"\"+geometrize_exporter_SvgExporter.rgbForColor(color)+\"\\\"\";};geometrize_exporter_SvgExporter.fillOpacityForAlpha=function(alpha){return\"fill-opacity=\\\"\"+alpha/255.0+\"\\\"\";};geometrize_exporter_SvgExporter.strokeOpacityForAlpha=function(alpha){return\"stroke-opacity=\\\"\"+alpha/255.0+\"\\\"\";};var geometrize_rasterizer_Rasterizer=function(){};geometrize_rasterizer_Rasterizer.__name__=true;geometrize_rasterizer_Rasterizer.drawLines=function(image,c,lines){if(!(image!=null)){throw new js__$Boot_HaxeError(\"FAIL: image != null\");}\nif(!(lines!=null)){throw new js__$Boot_HaxeError(\"FAIL: lines != null\");}\nvar sr=c>>24&255;sr|=sr<<8;sr*=c&255;sr=sr/255|0;var sg=c>>16&255;sg|=sg<<8;sg*=c&255;sg=sg/255|0;var sb=c>>8&255;sb|=sb<<8;sb*=c&255;sb=sb/255|0;var sa=c&255;sa|=sa<<8;var _g=0;while(_g<lines.length){var line=lines[_g];++_g;var y=line.y;var ma=65535;var m=65535;var as=(m-sa*(ma/m))*257;var a=as|0;var _g1=line.x1;var _g11=line.x2+1;while(_g1<_g11){var x=_g1++;var d=image.data[image.width*y+x];var dr=d>>24&255;var dg=d>>16&255;var db=d>>8&255;var da=d&255;var r=(_$UInt_UInt_$Impl_$.toFloat(dr*a+sr*ma)/_$UInt_UInt_$Impl_$.toFloat(m)|0)>>8;var g=(_$UInt_UInt_$Impl_$.toFloat(dg*a+sg*ma)/_$UInt_UInt_$Impl_$.toFloat(m)|0)>>8;var b=(_$UInt_UInt_$Impl_$.toFloat(db*a+sb*ma)/_$UInt_UInt_$Impl_$.toFloat(m)|0)>>8;var a1=(_$UInt_UInt_$Impl_$.toFloat(da*a+sa*ma)/_$UInt_UInt_$Impl_$.toFloat(m)|0)>>8;if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nif(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nimage.data[image.width*y+x]=((r<0?0:r>255?255:r)<<24)+((g<0?0:g>255?255:g)<<16)+((b<0?0:b>255?255:b)<<8)+(a1<0?0:a1>255?255:a1);}}};geometrize_rasterizer_Rasterizer.copyLines=function(destination,source,lines){if(!(destination!=null)){throw new js__$Boot_HaxeError(\"FAIL: destination != null\");}\nif(!(source!=null)){throw new js__$Boot_HaxeError(\"FAIL: source != null\");}\nif(!(lines!=null)){throw new js__$Boot_HaxeError(\"FAIL: lines != null\");}\nvar _g=0;while(_g<lines.length){var line=lines[_g];++_g;var y=line.y;var _g1=line.x1;var _g11=line.x2+1;while(_g1<_g11){var x=_g1++;destination.data[destination.width*y+x]=source.data[source.width*y+x];}}};geometrize_rasterizer_Rasterizer.bresenham=function(x1,y1,x2,y2){var dx=x2-x1;var ix=(dx>0?1:0)-(dx<0?1:0);dx=(dx<0?-dx:dx)<<1;var dy=y2-y1;var iy=(dy>0?1:0)-(dy<0?1:0);dy=(dy<0?-dy:dy)<<1;var points=[];points.push({x:x1,y:y1});if(dx>=dy){var error=dy-(dx>>1);while(x1!=x2){if(error>=0&&(error!=0||ix>0)){error-=dx;y1+=iy;}\nerror+=dy;x1+=ix;points.push({x:x1,y:y1});}}else{var error1=dx-(dy>>1);while(y1!=y2){if(error1>=0&&(error1!=0||iy>0)){error1-=dy;x1+=ix;}\nerror1+=dx;y1+=iy;points.push({x:x1,y:y1});}}\nreturn points;};geometrize_rasterizer_Rasterizer.scanlinesForPolygon=function(points){var lines=[];var edges=[];var _g=0;var _g1=points.length;while(_g<_g1){var i=_g++;var p1=points[i];var p2=i==points.length-1?points[0]:points[i+1];var p1p2=geometrize_rasterizer_Rasterizer.bresenham(p1.x,p1.y,p2.x,p2.y);edges=edges.concat(p1p2);}\nvar yToXs=new haxe_ds_IntMap();var _g2=0;while(_g2<edges.length){var point=edges[_g2];++_g2;var s=yToXs.h[point.y];if(s!=null){geometrize__$ArraySet_ArraySet_$Impl_$.add(s,point.x);}else{s=geometrize__$ArraySet_ArraySet_$Impl_$.create();geometrize__$ArraySet_ArraySet_$Impl_$.add(s,point.x);yToXs.h[point.y]=s;}}\nvar key=yToXs.keys();while(key.hasNext()){var key1=key.next();var a=geometrize__$ArraySet_ArraySet_$Impl_$.toArray(yToXs.h[key1]);var minMaxElements;if(a==null||a.length==0){minMaxElements={x:0,y:0};}else{var min=a[0];var max=a[0];var _g3=0;while(_g3<a.length){var value=a[_g3];++_g3;if(min>value){min=value;}\nif(max<value){max=value;}}\nminMaxElements={x:min,y:max};}\nlines.push(new geometrize_rasterizer_Scanline(key1,minMaxElements.x,minMaxElements.y));}\nreturn lines;};var geometrize_rasterizer_Scanline=function(y,x1,x2){this.y=y;this.x1=x1;this.x2=x2;};geometrize_rasterizer_Scanline.__name__=true;geometrize_rasterizer_Scanline.trim=function(scanlines,w,h){if(!(scanlines!=null)){throw new js__$Boot_HaxeError(\"FAIL: scanlines != null\");}\nvar w1=w;var h1=h;return scanlines.filter(function(line){if(line.y<0||line.y>=h1||line.x1>=w1||line.x2<0){return false;}else{var value=line.x1;var max=w1-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nline.x1=value<0?0:value>max?max:value;var value1=line.x2;var max1=w1-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nline.x2=value1<0?0:value1>max1?max1:value1;return line.x1<=line.x2;}});};var geometrize_runner_ImageRunner=$hx_exports[\"geometrize\"][\"runner\"][\"ImageRunner\"]=function(inputImage,backgroundColor){this.model=null;this.model=new geometrize_Model(inputImage,backgroundColor);};geometrize_runner_ImageRunner.__name__=true;geometrize_runner_ImageRunner.prototype={step:function(options){return this.model.step(options.shapeTypes,options.alpha,options.candidateShapesPerStep,options.shapeMutationsPerStep);},getImageData:function(){if(!(this.model!=null)){throw new js__$Boot_HaxeError(\"FAIL: model != null\");}\nreturn this.model.current;}};var geometrize_shape_Ellipse=function(xBound,yBound){this.x=Std.random(xBound);this.y=Std.random(yBound);this.rx=Std.random(32)+1;this.ry=Std.random(32)+1;this.xBound=xBound;this.yBound=yBound;};geometrize_shape_Ellipse.__name__=true;geometrize_shape_Ellipse.prototype={rasterize:function(){var lines=[];var aspect=this.rx/this.ry;var w=this.xBound;var h=this.yBound;var _g=0;var _g1=this.ry;while(_g<_g1){var dy=_g++;var y1=this.y-dy;var y2=this.y+dy;if((y1<0||y1>=h)&&(y2<0||y2>=h)){continue;}\nvar s=Math.sqrt(this.ry*this.ry-dy*dy)*aspect|0;var x1=this.x-s;var x2=this.x+s;if(x1<0){x1=0;}\nif(x2>=w){x2=w-1;}\nif(y1>=0&&y1<h){lines.push(new geometrize_rasterizer_Scanline(y1,x1,x2));}\nif(y2>=0&&y2<h&&dy>0){lines.push(new geometrize_rasterizer_Scanline(y2,x1,x2));}}\nreturn lines;},mutate:function(){var r=Std.random(3);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.rx+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(1<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.rx=value2<1?1:value2>max2?max2:value2;break;case 2:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.ry+(-16+Math.floor(33*Math.random()));var max3=this.xBound-1;if(!(1<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.ry=value3<1?1:value3>max3?max3:value3;break;}},clone:function(){var ellipse=new geometrize_shape_Ellipse(this.xBound,this.yBound);ellipse.x=this.x;ellipse.y=this.y;ellipse.rx=this.rx;ellipse.ry=this.ry;return ellipse;},getType:function(){return 3;},getRawShapeData:function(){return[this.x,this.y,this.rx,this.ry];},getSvgShapeData:function(){return\"<ellipse cx=\\\"\"+this.x+\"\\\" cy=\\\"\"+this.y+\"\\\" rx=\\\"\"+this.rx+\"\\\" ry=\\\"\"+this.ry+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";}};var geometrize_shape_Circle=function(xBound,yBound){geometrize_shape_Ellipse.call(this,xBound,yBound);this.rx=Std.random(32)+1;this.ry=this.rx;};geometrize_shape_Circle.__name__=true;geometrize_shape_Circle.__super__=geometrize_shape_Ellipse;geometrize_shape_Circle.prototype=$extend(geometrize_shape_Ellipse.prototype,{mutate:function(){var r=Std.random(2);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.rx+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(1<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nvar r1=value2<1?1:value2>max2?max2:value2;this.rx=r1;this.ry=r1;break;}},clone:function(){var circle=new geometrize_shape_Circle(this.xBound,this.yBound);circle.x=this.x;circle.y=this.y;circle.rx=this.rx;circle.ry=this.ry;return circle;},getType:function(){return 5;},getRawShapeData:function(){return[this.x,this.y,this.rx];},getSvgShapeData:function(){return\"<circle cx=\\\"\"+this.x+\"\\\" cy=\\\"\"+this.y+\"\\\" r=\\\"\"+this.rx+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";}});var geometrize_shape_Line=function(xBound,yBound){this.x1=Std.random(xBound);this.y1=Std.random(yBound);var value=this.x1+Std.random(32)+1;if(!(0<=xBound)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value<0?0:value>xBound?xBound:value;var value1=this.y1+Std.random(32)+1;if(!(0<=yBound)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value1<0?0:value1>yBound?yBound:value1;this.xBound=xBound;this.yBound=yBound;};geometrize_shape_Line.__name__=true;geometrize_shape_Line.prototype={rasterize:function(){var lines=[];var points=geometrize_rasterizer_Rasterizer.bresenham(this.x1,this.y1,this.x2,this.y2);var _g=0;while(_g<points.length){var point=points[_g];++_g;lines.push(new geometrize_rasterizer_Scanline(point.y,point.x,point.x));}\nreturn geometrize_rasterizer_Scanline.trim(lines,this.xBound,this.yBound);},mutate:function(){var r=Std.random(4);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x1+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x1=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y1+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y1=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.x2+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(0<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value2<0?0:value2>max2?max2:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.y2+(-16+Math.floor(33*Math.random()));var max3=this.yBound-1;if(!(0<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value3<0?0:value3>max3?max3:value3;break;}},clone:function(){var line=new geometrize_shape_Line(this.xBound,this.yBound);line.x1=this.x1;line.y1=this.y1;line.x2=this.x2;line.y2=this.y2;return line;},getType:function(){return 6;},getRawShapeData:function(){return[this.x1,this.y1,this.x2,this.y2];},getSvgShapeData:function(){return\"<line x1=\\\"\"+this.x1+\"\\\" y1=\\\"\"+this.y1+\"\\\" x2=\\\"\"+this.x2+\"\\\" y2=\\\"\"+this.y2+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";}};var geometrize_shape_QuadraticBezier=function(xBound,yBound){var upper=xBound-1;if(!(0<=upper)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.x1=Math.floor((upper+1)*Math.random());var upper1=yBound-1;if(!(0<=upper1)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.y1=Math.floor((upper1+1)*Math.random());var upper2=xBound-1;if(!(0<=upper2)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.cx=Math.floor((upper2+1)*Math.random());var upper3=yBound-1;if(!(0<=upper3)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.cy=Math.floor((upper3+1)*Math.random());var upper4=xBound-1;if(!(0<=upper4)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.x2=Math.floor((upper4+1)*Math.random());var upper5=yBound-1;if(!(0<=upper5)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.y2=Math.floor((upper5+1)*Math.random());this.xBound=xBound;this.yBound=yBound;};geometrize_shape_QuadraticBezier.__name__=true;geometrize_shape_QuadraticBezier.prototype={rasterize:function(){var lines=[];var points=[];var pointCount=20;var _g=0;var _g1=pointCount-1;while(_g<_g1){var i=_g++;var t=i/pointCount;var tp=1-t;var x=tp*(tp*this.x1+t*this.cx)+t*(tp*this.cx+t*this.x2)|0;var y=tp*(tp*this.y1+t*this.cy)+t*(tp*this.cy+t*this.y2)|0;points.push({x:x,y:y});}\nvar _g2=0;var _g3=points.length-1;while(_g2<_g3){var i1=_g2++;var p0=points[i1];var p1=points[i1+1];var pts=geometrize_rasterizer_Rasterizer.bresenham(p0.x,p0.y,p1.x,p1.y);var _g21=0;while(_g21<pts.length){var point=pts[_g21];++_g21;if(lines.length>0){var lastLine=lines[lines.length-1];if(lastLine.y==point.y&&lastLine.x1==point.x&&lastLine.x2==point.x){continue;}}\nlines.push(new geometrize_rasterizer_Scanline(point.y,point.x,point.x));}}\nreturn geometrize_rasterizer_Scanline.trim(lines,this.xBound,this.yBound);},mutate:function(){if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar r=Math.floor(3*Math.random());switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.cx+(-8+Math.floor(17*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.cx=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.cy+(-8+Math.floor(17*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.cy=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.x1+(-8+Math.floor(17*Math.random()));var max2=this.xBound-1;if(!(1<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x1=value2<1?1:value2>max2?max2:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.y1+(-8+Math.floor(17*Math.random()));var max3=this.yBound-1;if(!(1<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y1=value3<1?1:value3>max3?max3:value3;break;case 2:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value4=this.x2+(-8+Math.floor(17*Math.random()));var max4=this.xBound-1;if(!(1<=max4)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value4<1?1:value4>max4?max4:value4;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value5=this.y2+(-8+Math.floor(17*Math.random()));var max5=this.yBound-1;if(!(1<=max5)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value5<1?1:value5>max5?max5:value5;break;}},clone:function(){var bezier=new geometrize_shape_QuadraticBezier(this.xBound,this.yBound);bezier.cx=this.cx;bezier.cy=this.cy;bezier.x1=this.x1;bezier.y1=this.y1;bezier.x2=this.x2;bezier.y2=this.y2;return bezier;},getType:function(){return 7;},getRawShapeData:function(){return[this.x1,this.y1,this.cx,this.cy,this.x2,this.y2];},getSvgShapeData:function(){return\"<path d=\\\"M\"+this.x1+\" \"+this.y1+\" Q \"+this.cx+\" \"+this.cy+\" \"+this.x2+\" \"+this.y2+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";}};var geometrize_shape_Rectangle=function(xBound,yBound){this.x1=Std.random(xBound);this.y1=Std.random(yBound);var value=this.x1+Std.random(32)+1;var max=xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value<0?0:value>max?max:value;var value1=this.y1+Std.random(32)+1;var max1=yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value1<0?0:value1>max1?max1:value1;this.xBound=xBound;this.yBound=yBound;};geometrize_shape_Rectangle.__name__=true;geometrize_shape_Rectangle.prototype={rasterize:function(){var lines=[];var first=this.y1;var second=this.y2;var yMin=first<second?first:second;var first1=this.y1;var second1=this.y2;var yMax=first1>second1?first1:second1;if(yMin==yMax){var first2=this.x1;var second2=this.x2;var first3=this.x1;var second3=this.x2;lines.push(new geometrize_rasterizer_Scanline(yMin,first2<second2?first2:second2,first3>second3?first3:second3));}else{var _g=yMin;var _g1=yMax;while(_g<_g1){var y=_g++;var first4=this.x1;var second4=this.x2;var first5=this.x1;var second5=this.x2;lines.push(new geometrize_rasterizer_Scanline(y,first4<second4?first4:second4,first5>second5?first5:second5));}}\nreturn lines;},mutate:function(){var r=Std.random(2);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x1+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x1=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y1+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y1=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.x2+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(0<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value2<0?0:value2>max2?max2:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.y2+(-16+Math.floor(33*Math.random()));var max3=this.yBound-1;if(!(0<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value3<0?0:value3>max3?max3:value3;break;}},clone:function(){var rectangle=new geometrize_shape_Rectangle(this.xBound,this.yBound);rectangle.x1=this.x1;rectangle.y1=this.y1;rectangle.x2=this.x2;rectangle.y2=this.y2;return rectangle;},getType:function(){return 0;},getRawShapeData:function(){var first=this.x1;var second=this.x2;var first1=this.y1;var second1=this.y2;var first2=this.x1;var second2=this.x2;var first3=this.y1;var second3=this.y2;return[first<second?first:second,first1<second1?first1:second1,first2>second2?first2:second2,first3>second3?first3:second3];},getSvgShapeData:function(){var first=this.x1;var second=this.x2;var first1=this.y1;var second1=this.y2;var first2=this.x1;var second2=this.x2;var first3=this.x1;var second3=this.x2;var first4=this.y1;var second4=this.y2;var first5=this.y1;var second5=this.y2;return\"<rect x=\\\"\"+(first<second?first:second)+\"\\\" y=\\\"\"+(first1<second1?first1:second1)+\"\\\" width=\\\"\"+((first2>second2?first2:second2)-(first3<second3?first3:second3))+\"\\\" height=\\\"\"+((first4>second4?first4:second4)-(first5<second5?first5:second5))+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";}};var geometrize_shape_RotatedEllipse=function(xBound,yBound){this.x=Std.random(xBound);this.y=Std.random(yBound);this.rx=Std.random(32)+1;this.ry=Std.random(32)+1;this.angle=Std.random(360);this.xBound=xBound;this.yBound=yBound;};geometrize_shape_RotatedEllipse.__name__=true;geometrize_shape_RotatedEllipse.prototype={rasterize:function(){var pointCount=20;var points=[];var rads=this.angle*(Math.PI/180.0);var c=Math.cos(rads);var s=Math.sin(rads);var _g=0;var _g1=pointCount;while(_g<_g1){var i=_g++;var rot=360.0/pointCount*i*(Math.PI/180.0);var crx=this.rx*Math.cos(rot);var cry=this.ry*Math.sin(rot);var tx=crx*c-cry*s+this.x|0;var ty=crx*s+cry*c+this.y|0;points.push({x:tx,y:ty});}\nreturn geometrize_rasterizer_Scanline.trim(geometrize_rasterizer_Rasterizer.scanlinesForPolygon(points),this.xBound,this.yBound);},mutate:function(){var r=Std.random(4);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.rx+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(1<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.rx=value2<1?1:value2>max2?max2:value2;break;case 2:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.ry+(-16+Math.floor(33*Math.random()));var max3=this.yBound-1;if(!(1<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.ry=value3<1?1:value3>max3?max3:value3;break;case 3:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value4=this.angle+(-4+Math.floor(9*Math.random()));if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.angle=value4<0?0:value4>360?360:value4;break;}},clone:function(){var ellipse=new geometrize_shape_RotatedEllipse(this.xBound,this.yBound);ellipse.x=this.x;ellipse.y=this.y;ellipse.rx=this.rx;ellipse.ry=this.ry;ellipse.angle=this.angle;return ellipse;},getType:function(){return 4;},getRawShapeData:function(){return[this.x,this.y,this.rx,this.ry,this.angle];},getSvgShapeData:function(){var s=\"<g transform=\\\"translate(\"+this.x+\" \"+this.y+\") rotate(\"+this.angle+\") scale(\"+this.rx+\" \"+this.ry+\")\\\">\";s+=\"<ellipse cx=\\\"\"+0+\"\\\" cy=\\\"\"+0+\"\\\" rx=\\\"\"+1+\"\\\" ry=\\\"\"+1+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\" />\";s+=\"</g>\";return s;}};var geometrize_shape_RotatedRectangle=function(xBound,yBound){this.x1=Std.random(xBound);this.y1=Std.random(yBound);var value=this.x1+Std.random(32)+1;if(!(0<=xBound)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value<0?0:value>xBound?xBound:value;var value1=this.y1+Std.random(32)+1;if(!(0<=yBound)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value1<0?0:value1>yBound?yBound:value1;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.angle=Math.floor(361*Math.random());this.xBound=xBound;this.yBound=yBound;};geometrize_shape_RotatedRectangle.__name__=true;geometrize_shape_RotatedRectangle.prototype={rasterize:function(){var first=this.x1;var second=this.x2;var xm1=first<second?first:second;var first1=this.x1;var second1=this.x2;var xm2=first1>second1?first1:second1;var first2=this.y1;var second2=this.y2;var ym1=first2<second2?first2:second2;var first3=this.y1;var second3=this.y2;var ym2=first3>second3?first3:second3;var cx=(xm1+xm2)/2|0;var cy=(ym1+ym2)/2|0;var ox1=xm1-cx;var ox2=xm2-cx;var oy1=ym1-cy;var oy2=ym2-cy;var rads=this.angle*Math.PI/180.0;var c=Math.cos(rads);var s=Math.sin(rads);var ulx=ox1*c-oy1*s+cx|0;var uly=ox1*s+oy1*c+cy|0;var blx=ox1*c-oy2*s+cx|0;var bly=ox1*s+oy2*c+cy|0;var urx=ox2*c-oy1*s+cx|0;var ury=ox2*s+oy1*c+cy|0;var brx=ox2*c-oy2*s+cx|0;var bry=ox2*s+oy2*c+cy|0;return geometrize_rasterizer_Scanline.trim(geometrize_rasterizer_Rasterizer.scanlinesForPolygon([{x:ulx,y:uly},{x:urx,y:ury},{x:brx,y:bry},{x:blx,y:bly}]),this.xBound,this.yBound);},mutate:function(){var r=Std.random(3);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x1+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x1=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y1+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y1=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.x2+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(0<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value2<0?0:value2>max2?max2:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.y2+(-16+Math.floor(33*Math.random()));var max3=this.yBound-1;if(!(0<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value3<0?0:value3>max3?max3:value3;break;case 2:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value4=this.angle+(-4+Math.floor(9*Math.random()));if(!true){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.angle=value4<0?0:value4>360?360:value4;break;}},clone:function(){var rectangle=new geometrize_shape_RotatedRectangle(this.xBound,this.yBound);rectangle.x1=this.x1;rectangle.y1=this.y1;rectangle.x2=this.x2;rectangle.y2=this.y2;rectangle.angle=this.angle;return rectangle;},getType:function(){return 1;},getRawShapeData:function(){var first=this.x1;var second=this.x2;var first1=this.y1;var second1=this.y2;var first2=this.x1;var second2=this.x2;var first3=this.y1;var second3=this.y2;return[first<second?first:second,first1<second1?first1:second1,first2>second2?first2:second2,first3>second3?first3:second3,this.angle];},getSvgShapeData:function(){var first=this.x1;var second=this.x2;var xm1=first<second?first:second;var first1=this.x1;var second1=this.x2;var xm2=first1>second1?first1:second1;var first2=this.y1;var second2=this.y2;var ym1=first2<second2?first2:second2;var first3=this.y1;var second3=this.y2;var ym2=first3>second3?first3:second3;var cx=(xm1+xm2)/2|0;var cy=(ym1+ym2)/2|0;var ox1=xm1-cx;var ox2=xm2-cx;var oy1=ym1-cy;var oy2=ym2-cy;var rads=this.angle*Math.PI/180.0;var c=Math.cos(rads);var s=Math.sin(rads);var ulx=ox1*c-oy1*s+cx|0;var uly=ox1*s+oy1*c+cy|0;var blx=ox1*c-oy2*s+cx|0;var bly=ox1*s+oy2*c+cy|0;var urx=ox2*c-oy1*s+cx|0;var ury=ox2*s+oy1*c+cy|0;var brx=ox2*c-oy2*s+cx|0;var bry=ox2*s+oy2*c+cy|0;var points=[{x:ulx,y:uly},{x:urx,y:ury},{x:brx,y:bry},{x:blx,y:bly}];var s1=\"<polygon points=\\\"\";var _g=0;var _g1=points.length;while(_g<_g1){var i=_g++;s1+=points[i].x+\" \"+points[i].y;if(i!=points.length-1){s1+=\" \";}}\ns1+=\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\"/>\";return s1;}};var geometrize_shape_ShapeFactory=function(){};geometrize_shape_ShapeFactory.__name__=true;geometrize_shape_ShapeFactory.create=function(type,xBound,yBound){switch(type){case 0:return new geometrize_shape_Rectangle(xBound,yBound);case 1:return new geometrize_shape_RotatedRectangle(xBound,yBound);case 2:return new geometrize_shape_Triangle(xBound,yBound);case 3:return new geometrize_shape_Ellipse(xBound,yBound);case 4:return new geometrize_shape_RotatedEllipse(xBound,yBound);case 5:return new geometrize_shape_Circle(xBound,yBound);case 6:return new geometrize_shape_Line(xBound,yBound);case 7:return new geometrize_shape_QuadraticBezier(xBound,yBound);}};geometrize_shape_ShapeFactory.randomShapeOf=function(types,xBound,yBound){if(!(types!=null&&types.length>0)){throw new js__$Boot_HaxeError(\"FAIL: a != null && a.length > 0\");}\nvar upper=types.length-1;if(!(0<=upper)){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nreturn geometrize_shape_ShapeFactory.create(types[Math.floor((upper+1)*Math.random())],xBound,yBound);};var geometrize_shape_ShapeTypes=$hx_exports[\"geometrize\"][\"shape\"][\"ShapeTypes\"]=function(){};geometrize_shape_ShapeTypes.__name__=true;var geometrize_shape_Triangle=function(xBound,yBound){this.x1=Std.random(xBound);this.y1=Std.random(yBound);if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.x2=this.x1+(-16+Math.floor(33*Math.random()));if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.y2=this.y1+(-16+Math.floor(33*Math.random()));if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.x3=this.x1+(-16+Math.floor(33*Math.random()));if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nthis.y3=this.y1+(-16+Math.floor(33*Math.random()));this.xBound=xBound;this.yBound=yBound;};geometrize_shape_Triangle.__name__=true;geometrize_shape_Triangle.prototype={rasterize:function(){return geometrize_rasterizer_Scanline.trim(geometrize_rasterizer_Rasterizer.scanlinesForPolygon([{x:this.x1,y:this.y1},{x:this.x2,y:this.y2},{x:this.x3,y:this.y3}]),this.xBound,this.yBound);},mutate:function(){var r=Std.random(3);switch(r){case 0:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value=this.x1+(-16+Math.floor(33*Math.random()));var max=this.xBound-1;if(!(0<=max)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x1=value<0?0:value>max?max:value;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value1=this.y1+(-16+Math.floor(33*Math.random()));var max1=this.yBound-1;if(!(0<=max1)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y1=value1<0?0:value1>max1?max1:value1;break;case 1:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value2=this.x2+(-16+Math.floor(33*Math.random()));var max2=this.xBound-1;if(!(0<=max2)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x2=value2<0?0:value2>max2?max2:value2;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value3=this.y2+(-16+Math.floor(33*Math.random()));var max3=this.yBound-1;if(!(0<=max3)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y2=value3<0?0:value3>max3?max3:value3;break;case 2:if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value4=this.x3+(-16+Math.floor(33*Math.random()));var max4=this.xBound-1;if(!(0<=max4)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.x3=value4<0?0:value4>max4?max4:value4;if(!true){throw new js__$Boot_HaxeError(\"FAIL: lower <= upper\");}\nvar value5=this.y3+(-16+Math.floor(33*Math.random()));var max5=this.yBound-1;if(!(0<=max5)){throw new js__$Boot_HaxeError(\"FAIL: min <= max\");}\nthis.y3=value5<0?0:value5>max5?max5:value5;break;}},clone:function(){var triangle=new geometrize_shape_Triangle(this.xBound,this.yBound);triangle.x1=this.x1;triangle.y1=this.y1;triangle.x2=this.x2;triangle.y2=this.y2;triangle.x3=this.x3;triangle.y3=this.y3;return triangle;},getType:function(){return 2;},getRawShapeData:function(){return[this.x1,this.y1,this.x2,this.y2,this.x3,this.y3];},getSvgShapeData:function(){return\"<polygon points=\\\"\"+this.x1+\",\"+this.y1+\" \"+this.x2+\",\"+this.y2+\" \"+this.x3+\",\"+this.y3+\"\\\" \"+geometrize_exporter_SvgExporter.SVG_STYLE_HOOK+\"/>\";}};var haxe_ds_IntMap=function(){this.h={};};haxe_ds_IntMap.__name__=true;haxe_ds_IntMap.prototype={keys:function(){var a=[];for(var key in this.h)this.h.hasOwnProperty(key)?a.push(key|0):null;return HxOverrides.iter(a);}};var haxe_io_Bytes=function(data){this.length=data.byteLength;this.b=new Uint8Array(data);this.b.bufferValue=data;data.hxBytes=this;data.bytes=this.b;};haxe_io_Bytes.__name__=true;var js__$Boot_HaxeError=function(val){Error.call(this);this.val=val;if(Error.captureStackTrace){Error.captureStackTrace(this,js__$Boot_HaxeError);}};js__$Boot_HaxeError.__name__=true;js__$Boot_HaxeError.__super__=Error;js__$Boot_HaxeError.prototype=$extend(Error.prototype,{});var js_Boot=function(){};js_Boot.__name__=true;js_Boot.__string_rec=function(o,s){if(o==null){return\"null\";}\nif(s.length>=5){return\"<...>\";}\nvar t=typeof(o);if(t==\"function\"&&(o.__name__||o.__ename__)){t=\"object\";}\nswitch(t){case\"function\":return\"<function>\";case\"object\":if(o.__enum__){var e=$hxEnums[o.__enum__];var n=e.__constructs__[o._hx_index];var con=e[n];if(con.__params__){s+=\"\\t\";var tmp=n+\"(\";var _g=[];var _g1=0;var _g2=con.__params__;while(_g1<_g2.length){var p=_g2[_g1];++_g1;_g.push(js_Boot.__string_rec(o[p],s));}\nreturn tmp+_g.join(\",\")+\")\";}else{return n;}}\nif(((o)instanceof Array)){var l=o.length;var i;var str=\"[\";s+=\"\\t\";var _g3=0;var _g11=l;while(_g3<_g11){var i1=_g3++;str+=(i1>0?\",\":\"\")+js_Boot.__string_rec(o[i1],s);}\nstr+=\"]\";return str;}\nvar tostr;try{tostr=o.toString;}catch(e1){var e2=((e1)instanceof js__$Boot_HaxeError)?e1.val:e1;return\"???\";}\nif(tostr!=null&&tostr!=Object.toString&&typeof(tostr)==\"function\"){var s2=o.toString();if(s2!=\"[object Object]\"){return s2;}}\nvar k=null;var str1=\"{\\n\";s+=\"\\t\";var hasp=o.hasOwnProperty!=null;for(var k in o){if(hasp&&!o.hasOwnProperty(k)){continue;}\nif(k==\"prototype\"||k==\"__class__\"||k==\"__super__\"||k==\"__interfaces__\"||k==\"__properties__\"){continue;}\nif(str1.length!=2){str1+=\", \\n\";}\nstr1+=s+k+\" : \"+js_Boot.__string_rec(o[k],s);}\ns=s.substring(1);str1+=\"\\n\"+s+\"}\";return str1;case\"string\":return o;default:return String(o);}};var $_,$fid=0;function $bind(o,m){if(m==null)return null;if(m.__id__==null)m.__id__=$fid++;var f;if(o.hx__closures__==null)o.hx__closures__={};else f=o.hx__closures__[m.__id__];if(f==null){f=m.bind(o);o.hx__closures__[m.__id__]=f;}return f;}\nString.__name__=true;Array.__name__=true;Object.defineProperty(js__$Boot_HaxeError.prototype,\"message\",{get:function(){return String(this.val);}});js_Boot.__toStr=({}).toString;Main.runPauseButton=window.document.getElementById(\"runpausebutton\");Main.stepButton=window.document.getElementById(\"stepbutton\");Main.openImageFileInput=window.document.getElementById(\"openimageinput\");Main.randomImageButton=window.document.getElementById(\"randomimagebutton\");Main.resetButton=window.document.getElementById(\"resetbutton\");Main.saveImageButton=window.document.getElementById(\"saveimagebutton\");Main.saveSvgButton=window.document.getElementById(\"savesvgbutton\");Main.saveJsonButton=window.document.getElementById(\"savejsonbutton\");Main.rectanglesCheckbox=window.document.getElementById(\"rectangles\");Main.rotatedRectanglesCheckbox=window.document.getElementById(\"rotatedrectangles\");Main.trianglesCheckbox=window.document.getElementById(\"triangles\");Main.ellipsesCheckbox=window.document.getElementById(\"ellipses\");Main.rotatedEllipsesCheckbox=window.document.getElementById(\"rotatedellipses\");Main.circlesCheckbox=window.document.getElementById(\"circles\");Main.linesCheckbox=window.document.getElementById(\"lines\");Main.quadraticBeziersCheckbox=window.document.getElementById(\"quadraticbeziers\");Main.shapeOpacitySlider=window.document.getElementById(\"shapeopacity\");Main.initialBackgroundOpacitySlider=window.document.getElementById(\"initialbackgroundopacity\");Main.randomShapesPerStepSlider=window.document.getElementById(\"randomshapesperstep\");Main.shapeMutationsPerStepSlider=window.document.getElementById(\"shapemutationsperstep\");Main.shapesAddedText=window.document.getElementById(\"shapesaddedtext\");Main.maxShapesCapTextEdit=window.document.getElementById(\"maxshapescaptextedit\");Main.currentSvgContainer=window.document.getElementById(\"currentsvgcontainer\");Main.sampleImagesContainer=window.document.getElementById(\"sampleimages\");Main.defaultImageElement=window.document.getElementById(\"defaultimage\");Main.imagesToGeometrize=[\"assets/images/demo_images/beach_sunset.jpg\",\"assets/images/demo_images/boat.jpg\",\"assets/images/demo_images/borrowdale_valley.jpg\",\"assets/images/demo_images/building.jpg\",\"assets/images/demo_images/borrowdale_valley.jpg\",\"assets/images/demo_images/building.jpg\",\"assets/images/demo_images/candle_yet_another.jpg\",\"assets/images/demo_images/cat_staring.jpg\",\"assets/images/demo_images/chomsky.jpg\",\"assets/images/demo_images/grapefruit.jpg\",\"assets/images/demo_images/london.jpg\",\"assets/images/demo_images/lynx_staring.jpg\",\"assets/images/demo_images/mindblown.jpg\",\"assets/images/demo_images/mountain.jpg\",\"assets/images/demo_images/papillon_dog.jpg\",\"assets/images/demo_images/pier.jpg\",\"assets/images/demo_images/pylon_and_sun.jpg\",\"assets/images/demo_images/seagull.jpg\",\"assets/images/demo_images/sun_and_tree.jpg\",\"assets/images/demo_images/sun_over_hills.jpg\",\"assets/images/demo_images/the_great_pyramid_at_giza.jpg\",\"assets/images/demo_images/the_lady_of_shalott.jpg\",\"assets/images/demo_images/tree_and_clouds.jpg\",\"assets/images/demo_images/windswept.jpg\",\"assets/images/demo_images/wolf.jpg\",\"assets/images/demo_images/woodland_cemetery.jpg\"];geometrize_exporter_SvgExporter.SVG_STYLE_HOOK=\"::svg_style_hook::\";geometrize_shape_ShapeTypes.RECTANGLE=0;geometrize_shape_ShapeTypes.ROTATED_RECTANGLE=1;geometrize_shape_ShapeTypes.TRIANGLE=2;geometrize_shape_ShapeTypes.ELLIPSE=3;geometrize_shape_ShapeTypes.ROTATED_ELLIPSE=4;geometrize_shape_ShapeTypes.CIRCLE=5;geometrize_shape_ShapeTypes.LINE=6;geometrize_shape_ShapeTypes.QUADRATIC_BEZIER=7;Main.main();})(typeof exports!=\"undefined\"?exports:typeof window!=\"undefined\"?window:typeof self!=\"undefined\"?self:this);";